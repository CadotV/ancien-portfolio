{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/url/url.js","webpack:///./node_modules/node-libs-browser/node_modules/punycode/punycode.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/url/util.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./src/style.css?9819","webpack:///./src/style.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/config/config.js","webpack:///./src/geometry/vector.js","webpack:///./src/geometry/segment.js","webpack:///./src/geometry/helper.js","webpack:///./src/collision.js","webpack:///./src/game_components/gameComponent.js","webpack:///./src/geometry/rectangle.js","webpack:///./src/geometry/circle.js","webpack:///./src/game_components/projectiles/img/projectileDefault.png","webpack:///./src/game_components/projectiles/img/projectileGreen.png","webpack:///./src/game_components/projectiles/img/projectileRed.png","webpack:///./src/game_components/projectiles/projectile.js","webpack:///./src/game_components/cannon/img/cannonPlayer.png","webpack:///./src/game_components/cannon/img/cannonEnemyHTML.png","webpack:///./src/game_components/cannon/img/cannonEnemyCSS.png","webpack:///./src/game_components/cannon/img/cannonEnemyNode.png","webpack:///./src/game_components/cannon/img/cannonEnemyMeteor.png","webpack:///./src/game_components/cannon/img/cannonEnemyJS.png","webpack:///./src/game_components/cannon/img/cannonEnemySQL.png","webpack:///./src/game_components/cannon/img/cannonEnemyMongo.png","webpack:///./src/game_components/cannon/img/cannonEnemyPHP.png","webpack:///./src/game_components/cannon/img/cannonEnemyAngular.png","webpack:///./src/sounds/laser.mp3","webpack:///./src/game_components/cannon/cannon.js","webpack:///./src/game_components/player/img/player_spriteTile.png","webpack:///./src/ui/game_components/uiHealth.js","webpack:///./src/game_components/reactor/img/reactorDefault.png","webpack:///./src/game_components/reactor/reactor.js","webpack:///./src/game_components/player/player.js","webpack:///./src/game_components/enemy/img/enemy_spriteTile.png","webpack:///./src/game_components/enemy/enemy.js","webpack:///./src/ui/score.js","webpack:///./src/background/img/planets.png","webpack:///./src/background/backgroundPlanets.js","webpack:///./src/background/img/stars.png","webpack:///./src/background/backgroundStars.js","webpack:///./src/background/img/fogs.png","webpack:///./src/background/backgroundFogs.js","webpack:///./src/background/background.js","webpack:///./src/ui/text.js","webpack:///./src/game_components/shieldPack/img/shieldPack.png","webpack:///./src/game_components/shieldPack/shieldPack.js","webpack:///./src/Rules.jpg","webpack:///./src/sounds/gameLoop.mp3","webpack:///./src/game.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","punycode","util","Url","this","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","parse","urlParse","resolve","source","relative","resolveObject","format","obj","isString","protocolPattern","portPattern","simplePathPattern","unwise","concat","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","url","parseQueryString","slashesDenoteHost","isObject","u","TypeError","queryIndex","indexOf","splitter","uSplit","split","replace","rest","join","trim","length","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","atSign","hostEnd","hec","lastIndexOf","slice","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","j","k","charCodeAt","validParts","notHost","bit","push","unshift","toASCII","h","ae","esc","encodeURIComponent","escape","qm","keys","stringify","charAt","rel","result","tkeys","tk","tkey","rkeys","rk","rkey","v","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","splice","isAbsolute","root","nodeType","freeGlobal","global","window","self","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","array","fn","mapDomain","string","parts","ucs2decode","extra","output","counter","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","decode","input","out","basic","index","oldi","w","baseMinusT","codePoint","inputLength","bias","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","test","webpackPolyfill","deprecate","paths","children","g","Function","e","arg","prop","qs","sep","eq","options","regexp","maxKeys","len","kstr","vstr","x","idx","isArray","Array","xs","toString","stringifyPrimitive","isFinite","undefined","objectKeys","ks","f","res","content","locals","useSourceMap","list","item","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","JSON","data","sourceURLs","sources","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","_i","memo","stylesInDom","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","listToStyles","styles","newStyles","css","media","addStylesToDom","domStyle","refs","addStyle","insertStyleElement","style","createElement","attributes","nonce","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","newList","mayRemove","_domStyle","gameConfig","gameDebug","flagDebug","debugLevel","backgroundConfig","enemyConfig","enemySpeedSpawn","shieldPackConfig","shieldPackSpeedSpawn","Vector2","y","refX","refY","isNaN","console","origin","Segment","v1","v2","Helper","Collision","GameComponent","canvas","physicsBody","graphicsBody","animateUnit","randomCannon","debug","center","angle","oppositeAngle","directionAngle","offset","backPosition","animateTile","animateTileMax","segment","Rectangle","width","height","Circle","radius","boundingCirc","boundingRect","sum","substract","dotProduct","scalarProduct","divide","distance","sqrt","clone","Vector","scale","normalize","norm","render","ref","ctx","color","strokeStyle","beginPath","moveTo","lineTo","stroke","closePath","defineProperties","magnitude","set","newMagnitude","angleFromDirection","bodyPos","targetPos","distX","distY","atan2","oppositeAngleFromDirection","rectsCollision","rect1","rect2","circlesCollision","circle1","circle2","abs","rectCircleCollision","rect","circle","heigh","dx","dy","vector2CircleCollision","vector2","circleCanvasCollision","teleport","moveLerp","lerpPourcent","lerpAngle","moveNoLerp","vector2Direction","speed","moveCollideWithCanvas","moveCollision","moveCollisionX","moveCollisionY","vectorAngle","oppositeVectorAngle","unitAnimation","save","translate","rotate","drawImage","restore","clientLeft","clientTop","position","newPos","rotation","PI","angleX","cos","angleY","sin","newVectorAngle","lineWidth","strokeRect","area","arc","diameter","circumference","randomPoint","randAngle","random","Projectile","startPos","projectileColor","enemyArr","baseDamage","Image","src","projectileRed","projectileGreen","gameComponent","round","destroyed","moveDirection","enemy","getHit","baseFireRate","Cannon","physicsBodyAttached","fireRate","typeCannon","laser","Audio","played","time","cannonPlayer","cannonEnemyAngular","cannonEnemyCSS","cannonEnemyHTML","cannonEnemyMeteor","cannonEnemyNode","cannonEnemySQL","cannonEnemyMongo","cannonEnemyPHP","cannonEnemyJS","flagFiring","aggro","finalFireRate","fireTimeCount","fireAngle","projectileArr","fireAtTarget","angleToTarget","projectile","UiHealth","startHealth","startShield","currentHealth","currentHealthPourcent","currentShield","updateHealthAndShield","health","shield","displayHealth","displayShield","positionCenter","Reactor","animate","Player","score","aggroRadius","satelliteRadius","cannon","uiHealth","enemyInAggroArr","flagEnemyInAggroRadius","startGamePos","vector0","moveTouch","reachStartPos","parseInt","detectTargetInAggroRadius","includes","enemyIndex","attackTargetInAggroRadius","stopAggro","log","damage","regenerateHealth","gainShield","reactorOffset","Enemy","satellite","reachRandPos","randomX","randomY","randomPosInCanvas","randomPos","Score","scoreString","moveStartPos","moveToTarget","move","moveRandom","moveInCanvas","moveSatellite","scoreStringTotalWdith","newScore","fillStyle","font","fillText","BackgroundPlanets","gameSpeed","backgroundGraphicsBody","planets","backgroundWidth","backgroundHeight","backgroundSpeed","randomSpeed","ratioW","ratioH","backgroundSX","offsetSX","backgroundSY","backgroundDX","offsetDX","backgroundDY","BackgroundStars","stars","randomSize","returnRandomSize","BackgroundFogs","fogs","randomRotation","returnRandomRotation","Background","nbBackgroundStars","nbForegroundStars","nbBackgroundFogs","nbForegroundFogs","backgroundPlanets","starsBackgroundArr","starsForegroundArr","fogsBackgroundArr","fogsForegroundArr","Text","text","fontSize","setOffset","imageHeight","star","fog","stringTotalWdith","changeText","destroy","ShieldPack","shieldPack","topPosition","bottomPosition","shieldAmount","playerTarget","Game","getContext","ctxBlackScreen","ctxText","ctxMenu","ctxMenuRestart","startTime","animationLength","rafID","playerReachStartPos","initPos","rulesImage","totalScore","buttonShowDebug","buttonArr","spawnEnemyTimer","spawnShieldPackTimer","buttonClick","event","pageX","offsetLeft","pageY","offsetTop","buttons","button","top","left","click","buttonHover","hover","touchHandler","preventDefault","touches","mouseHandler","menuScreen","clearRect","startButton","context","fillRect","removeEventListener","start","debugButton","showDebug","addEventListener","restartScreen","restartButton","downloadCV","stringWidth","open","addListener","init","reset","removeListener","gameSound","gameLoop","loop","play","globalAlpha","flagDrawPending","readyText","background","player","playerStartPos","allEnemyArr","shieldPackArr","requestAnimationFrame","requestRedraw","updateDestroyed","updateScore","enemyTotalScore","spawnShieldPack","spawnRandomEnemy","spawnX","spawnY","redraw","timestamp","progress","isMobile","navigator","userAgent","returnValue","ontouchmove","canvasElement","innerWidth","innerHeight","innerHTML","canvasComponent","body","getElementById"],"mappings":"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","file":"game.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./style.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"h1, h2 {\\n  font-family: Lato;\\n}\\n\\n#app {\\n  background-color: coral;\\n}\\n\\n#gameCanvas {\\n  background-color: black;\\n  \\n}\\n\\nhtml, body {\\n  position: fixed;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nhtml, body {\\n  position: relative;\\n  overflow: hidden;\\n}\\n\\nbody {\\n  position: fixed;\\n  overflow: hidden;\\n}\\n\\nbody {\\n  position: fixed;\\n  height: 100%;\\n  overflow: hidden;\\n  width: 100%;\\n}\\n\\ncanvas {\\n  margin: 0;\\n  padding: 0;\\n}\", \"\"]);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\n/**\n * General game configuration\n */\nexport const gameConfig = {\n    gameSpeed: 3,\n    gameScale: 1,\n}\n\nexport const gameDebug = {\n    flagDebug: false,\n    debugLevel: 2,\n}\n\nexport const backgroundConfig = {\n    nbBackgroundStars: 30,\n    nbForegroundStars: 10,\n    nbBackgroundFogs: 10,\n    nbForegroundFogs: 5,\n}\n\n// TODO add player config\n\nexport const enemyConfig = {\n    enemySpeedSpawn: 90,\n}\n\nexport const shieldPackConfig = {\n    shieldPackSpeedSpawn: 1000,\n}\n\n// module.exports = module.default = [ gameConfig, debugConfig ];","import { parse } from \"url\";\n\n/**\n * Vector2 is used by other primitive geometry shapes\n * @author: Valentin Cadot\n * @mail: valentin.cadot@gmail.com\n * @licence: MIT\n * @version: 1.0.0\n */\n\n/**\n * TIPS\n * - use integer values for graphics, not position\n */\n\n/**\n * Vector2 Object\n * @since: 1.0.0\n */\n\n// origin: use when origin is not the canvas but the object instance\nexport default function Vector2(x, y, refX = 0, refY = 0) {\n  if (!isNaN(x) && !isNaN(y)) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.origin = false;\n  } else {\n    console.error(\"x and y must be valid integers\");\n  }\n\n  if ((!isNaN(refX) && !isNaN(refY)) && (refX != 0 && refY != 0)) {\n    this.refX = refX;\n    this.refY = refY;\n    this.origin = true;\n  } else {\n    //console.error(\"refX and refY must be valid integers\");\n  }\n}\n\n/////////////////////////////////\n///// public static methods /////\n/////////////////////////////////\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} Sum of 2 Vector2\n */\nVector2.sum = function (v1, v2) {\n  return new Vector2(v1.x + v2.x, v1.y + v2.y);\n}\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} Subtraction of 2 Vector2\n */\nVector2.substract = function (v1, v2) {\n  return new Vector2(v1.x - v2.x, v1.y - v2.y);\n}\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} dotProduct of 2 Vector2\n */\nVector2.dotProduct = function (v1, v2) {\n  return new Vector2(v1.x * v2.x, v1.y * v2.y);\n}\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} ScalarProduct of 2 Vector2\n */\nVector2.scalarProduct = function (v1, v2) {\n  return v1.x * v2.x + v1.y * v2.y;\n}\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} Division of 2 Vector2\n */\nVector2.divide = function (v1, v2) {\n  return new Vector2(v1.x / v2.x, v1.y / v2.y);\n}\n\n/**\n * @since: 1.0.0\n * @return {Number} distance between 2 vectors\n */\nVector2.distance = function (v1, v2) {\n  return Math.sqrt((v1.x - v2.x)**2 + (v1.y - v2.y)**2);\n}\n\n/**\n * @since: 1.0.0\n * @return: {Vector2} A clone of the Vector2 Object instance\n */\nVector2.clone = function () {\n  return new Vector(this.x, this.y);\n}\n\n/////////////////////////////////////\n///// public non static methods /////\n/////////////////////////////////////\n\n// use matrice with transforms and translation in spaces references instead \n/* Vector2.prototype.width = function(originPoint = new Vector2(0, 0)) {\n  typeof originPoint.__proto__ === 'Vector2' ? originPoint : new Vector2(0, 0);\n  return this.x - originPoint.x;\n}\n\nVector2.prototype.height = function(originPoint = new Vector2(0, 0)) {\n  typeof originPoint.__proto__ === 'Vector2' ? originPoint : new Vector2(0, 0);\n  return this.y - originPoint.y;\n} */\n\n/**\n * return: {this} \n */\n// Vector2.prototype.angleRadians = function () {\n//   var angle = Math.atan2(this.x, this.y);\n//   if (angle < 0) {\n//     angle += 2 * Math.PI;\n//   }\n//   return angle;\n// }\n\n/**\n * @since: 1.0.0\n * @param: {number} s - the scale\n * @return: {this} The Vector2 instance scaled\n */\nVector2.prototype.scale = function (s) {\n  if (isFinite(s)) {\n    this.x = this.x * s;\n    this.y = this.y * s;\n  } else {\n    this.x = 0;\n    this.y = 0;\n  }\n  // return this;\n}\n\n/**\n * @since: 1.0.0\n */\nVector2.prototype.normalize = function () {\n  var norm = this.x ** 2 + this.y ** 2;\n  if (norm > 0) {\n    norm = 1 / Math.sqrt(norm);\n    this.x *= norm;\n    this.y *= norm;\n  }\n  return this;\n}\n\n/**\n * @param {Vector2} v\n */\nVector2.prototype.update = function (v) {\n  this.x = v.x;\n  this.y = v.y;\n}\n\n/**\n * @param {Vector2} ref - the origin ref Vector2\n * @param {ctx} ctx - the requestAimationFrame reference ?\n * @param {string} color - color used for graphics rendering\n * @since: 1.0.0\n * TODO: temp function, not necessary\n */\nVector2.prototype.render = function (ref, ctx, color) {\n  ctx.strokeStyle = color;\n  ctx.beginPath();\n  ctx.moveTo(ref.x, ref.y);\n  ctx.lineTo(this.x, this.y);\n  ctx.stroke();\n  ctx.closePath();\n}\n\n\n/**\n * Getters & Setters\n * __defineGetter__ and __defineSetter__ is the old way of doing getters and setters\n * new way is Object.defineProperties(\"My field\", function{})\n */\nObject.defineProperties(Vector2.prototype, {\n  /**\n   * @since: 1.0.0\n   * @get: {number} Return the magnitude (length) of the Vector2 instance\n   * @set: {this} Set Vector2 instance x and y values with same direction\n   */\n  center: {\n    get: function () {\n      return this;\n    }\n  },\n  magnitude: {\n    get: function () {\n      // Don't use Math.pow(), way more slower than **\n      return Math.sqrt(this.x ** 2 + this.y ** 2);\n    },\n    set: function (newMagnitude = 0) {\n      /* this.x *= newMagnitude / this.magnitude;  \n      this.y *= newMagnitude / this.magnitude;   */\n      this.x *= newMagnitude / this.magnitude;\n      this.y *= newMagnitude / this.magnitude;\n    }\n  },\n})","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// primitives\nimport Vector2 from \"./vector\";\n\n/**\n * \n * @param {Vector2} v1 \n * @param {Vector2} v2 \n */\nexport default function Segment(v1, v2) {\n  this.v1 = v1 || new Vector2(0, 0);\n  this.v2 = v2 || new Vector2(0, 0);\n}\n\n/**\n * @param {Float} s - the scale factor for devices ratio\n */\nSegment.prototype.scale = function (s) {\n  if (isFinite(s)) {\n    this.v1.x = this.v1.x * s;\n    this.v1.y = this.v1.y * s;\n    this.v2.x = this.v2.x * s;\n    this.v2.y = this.v2.y * s;\n  } else {\n    this.v1.x = 0;\n    this.v1.y = 0;\n    this.v2.x = 0;\n    this.v2.y = 0;\n  }\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\nSegment.prototype.update = function (v1, v2) {\n  // when need to calculate v2 which is on radius\n  // use equilateral triangle from Vector2(0, 0)\n  this.v1 = v1;\n  this.v2 = v2;\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {String} color\n */\nSegment.prototype.render = function (ctx, color) {\n  ctx.strokeStyle = color;\n  ctx.beginPath();\n  ctx.moveTo(this.v1.x, this.v1.y);\n  ctx.lineTo(this.v2.x, this.v2.y);\n  ctx.stroke();\n  ctx.closePath();\n}\n\nObject.defineProperties(Segment.prototype, {\n  magnitude: {\n    get: function () {\n      return Math.sqrt(this.v2.x ** 2 + this.v2.y ** 2) - Math.sqrt(this.v1.x ** 2 + this.v2.y ** 2);\n    }\n  }\n})","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n/**\n * Helper: just static function to help\n */\nexport default function Helper() { }\n\n/**\n * @param {Vector2} bodyPos\n * @param {Vector2} targetPos\n */\nHelper.angleFromDirection = function (bodyPos, targetPos) {\n  var distX = targetPos.x - bodyPos.x;\n  var distY = targetPos.y - bodyPos.y;\n  return Math.atan2(distY, distX);\n}\n\nHelper.oppositeAngleFromDirection = function (bodyPos, targetPos) {\n  var distX = bodyPos.x - targetPos.x;\n  var distY = bodyPos.y - targetPos.y;\n  return Math.atan2(distY, distX);\n}","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n\nexport default function Collision() { }\n\nCollision.rectsCollision = function (rect1, rect2) {\n  if (rect1.x < rect2.x + rect2.width &&\n    rect1.x + rect1.width > rect2.x &&\n    rect1.y < rect2.y + rect2.height &&\n    rect1.y + rect1.height > rect2.y) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n// WARNING same function as vector2CircleCollision, refactore !\nCollision.circlesCollision = function (circle1, circle2) {\n  let distance = circle1.radius + circle2.radius;\n  let distX = Math.abs(circle1.x - circle2.x);\n  let distY = Math.abs(circle1.y - circle2.y);\n\n  // Use Vector2 normalize\n  if (distance > Math.sqrt((distX * distX) + (distY * distY))) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\n// Simple collision detection between shapes\nCollision.rectCircleCollision = function (rect, circle) {\n  let distX = Math.abs(circle.x - rect.x - rect.width / 2);\n  let distY = Math.abs(circle.y - rect.y - rect.height / 2);\n\n  if (distX > (rect.width / 2 + circle.radius)) { return false; }\n  if (distY > (rect.height / 2 + circle.radius)) { return false; }\n\n  if (distX <= (rect.width / 2)) { return true; }\n  if (distY <= (rect.heigh / 2)) { return true; }\n\n  let dx = distX - rect.width / 2;\n  let dy = distY - rect.height / 2;\n  return (dx * dx + dy * dy <= (circle.radius * circle.radius));\n};\n\nCollision.vector2CircleCollision = function (vector2, circle) {\n  let distX = Math.abs(circle.x - vector2.x);\n  let distY = Math.abs(circle.y - vector2.y);\n\n  if (circle.radius > Math.sqrt((distX * distX) + (distY * distY))) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\nCollision.circleCanvasCollision = function (circle, canvas) {\n  if (circle.x + circle.radius > canvas.width ||\n    circle.x - circle.radius < 0 ||\n    circle.y + circle.radius > canvas.height ||\n    circle.y - circle.radius < 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n// for more complicated collisions use: https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// Primitives\nimport Vector2 from '../geometry/vector';\nimport Segment from '../geometry/segment';\n\n// Others\nimport Helper from '../geometry/helper';\nimport Collision from '../collision';\n\n// Use sub-class pattern to inherit from this constructor function ?\n\n/**\n * This is the base object for abstract gameComponent like player and enemies\n * It only describe base properties for every gameObject, and base functions\n * \n * @param {HTMLCanvasElement} canvas \n * @param {Circle/Rectangle/Vector2} physicsBody \n * @param {HTMLImageElement} graphicsBody\n * @param {Boolean} animateUnit\n * @param {Bollean} randomCannon\n * @param {Boolean} debug \n */\nexport default function GameComponent(canvas, physicsBody, graphicsBody, animateUnit = false, randomCannon = false, debug) {\n    this.canvas = canvas;\n\n    this.physicsBody = physicsBody;\n    this.graphicsBody = graphicsBody;\n\n    this.x = physicsBody.center.x;\n    this.y = physicsBody.center.y;\n\n    this.angle = 0;\n    this.oppositeAngle = 0;\n    this.directionAngle = 0;\n\n    this.offset = 0;\n\n    // For reactor component\n    this.backPosition = new Vector2(0, 0);\n\n    this.animateUnit = animateUnit;\n    this.animateTile = 0;\n    this.animateTileMax = 6;\n\n    //this.randomCannon = randomCannon;\n\n    // FIXME Don't work with tiles\n    // if (this.randomCannon) {\n    //     this.graphicsBodyOffsetX = Math.floor(Math.random() * 3) * this.graphicsBody.width / 3;\n    //     this.graphicsBodyOffsetY = Math.floor(Math.random() * 3) * this.graphicsBody.height / 3;\n    // }\n\n    this.debug = debug;\n\n    if (this.debug.flagDebug) {\n        this.segment = new Segment(physicsBody.center, physicsBody.center);\n    }\n}\n\n/**\n * Teleport a gameComponent after instantiating it\n * @param {Vector2} targetPos\n */\nGameComponent.prototype.teleport = function (targetPos) {\n    this.x = targetPos.x;\n    this.y = targetPos.y;\n}\n\n/**\n * @param {Vector2} targetPos\n * @param {Number} lerpPourcent - a low float value \n */\nGameComponent.prototype.moveLerp = function (targetPos, lerpPourcent) {\n    this.x += (targetPos.x - this.physicsBody.center.x) * lerpPourcent;\n    this.y += (targetPos.y - this.physicsBody.center.y) * lerpPourcent;\n    this.lerpAngle(targetPos, lerpPourcent);\n\n}\n\n// Same function as above but with lerp at the start and the end with a max speed\n// use Vector2.normalize\n// FIXME take care of float values, to avoid jitter\n// maybe put the function in geometry scripts ?\n/**\n * @param {Vector2} vector2Direction\n * @param {Number} angle\n * @param {Number} speed\n */\nGameComponent.prototype.moveNoLerp = function (vector2Direction, angle, speed) {\n    this.x += vector2Direction.normalize().x * speed;\n    this.y += vector2Direction.normalize().y * speed;\n    this.angle = angle;\n}\n\n/**\n * Move the gameComponent along side canvas\n * @param {Vector2} targetPos\n */\nGameComponent.prototype.moveCollideWithCanvas = function (targetPos, angle) {\n    if (this.physicsBody.center.x - this.physicsBody.radius <= 0 &&\n        this.physicsBody.center.y - this.physicsBody.radius <= 0) {\n        // Collide left and top side of canvas\n        targetPos.x = this.physicsBody.radius;\n        targetPos.y = this.physicsBody.radius;\n        this.angle = angle;\n        this.moveCollision(targetPos);\n    } else if (this.physicsBody.center.x + this.physicsBody.radius >= this.canvas.width &&\n        this.physicsBody.center.y - this.physicsBody.radius <= 0) {\n        // Collide right and top side of canvas\n        targetPos.x = this.canvas.width - this.physicsBody.radius;\n        targetPos.y = this.physicsBody.radius;\n        this.angle = angle;\n        this.moveCollision(targetPos);\n    } else if (this.physicsBody.center.x - this.physicsBody.radius <= 0 &&\n        this.physicsBody.center.y + this.physicsBody.radius >= this.canvas.height) {\n        // Collide left and bottom side of canvas\n        targetPos.x = this.physicsBody.radius;\n        targetPos.y = this.canvas.height - this.physicsBody.radius;\n        this.moveCollision(targetPos);\n        this.angle = angle;\n    } else if (this.physicsBody.center.x + this.physicsBody.radius >= this.canvas.width &&\n        this.physicsBody.center.y + this.physicsBody.radius >= this.canvas.height) {\n        // Collide right and bottom side of canvas\n        targetPos.x = this.canvas.width - this.physicsBody.radius;\n        targetPos.y = this.canvas.height - this.physicsBody.radius;\n        this.moveCollision(targetPos);\n        this.angle = angle;\n    }\n\n    if (this.physicsBody.center.x - this.physicsBody.radius <= 0) {\n        // Collide left side of canvas\n        targetPos.x = this.physicsBody.radius;\n        this.moveCollisionX(targetPos, 0.02);\n        this.angle = angle;\n    } else if (this.physicsBody.center.x + this.physicsBody.radius >= this.canvas.width) {\n        // Collide right side of canvas\n        targetPos.x = this.canvas.width - this.physicsBody.radius;\n        this.moveCollisionX(targetPos, 0.02);\n        this.angle = angle;\n    } else if (this.physicsBody.center.y - this.physicsBody.radius <= 0) {\n        // Collide top side of canvas\n        targetPos.y = this.physicsBody.radius;\n        this.moveCollisionY(targetPos, 0.02);\n        this.angle = angle;\n    } else if (this.physicsBody.center.y + this.physicsBody.radius >= this.canvas.height) {\n        // Collide bottom side of canvas\n        targetPos.y = this.canvas.height - this.physicsBody.radius;\n        this.moveCollisionY(targetPos, 0.02);\n        this.angle = angle;\n    }\n}\n\n/**\n * @param {Vector2} targetPos\n */\nGameComponent.prototype.moveCollisionX = function (targetPos, lerpPourcent) {\n    // this.x = (targetPos.x - this.physicsBody.center.x);\n    this.x = targetPos.x\n    this.y += (targetPos.y - this.physicsBody.center.y) * lerpPourcent;\n}\n\n/**\n * @param {Vector2} targetPos \n */\nGameComponent.prototype.moveCollisionY = function (targetPos, lerpPourcent) {\n    this.x += (targetPos.x - this.physicsBody.center.x) * lerpPourcent;\n    this.y = targetPos.y;\n}\n\n/**\n * @param {Vector2} targetPos\n */\nGameComponent.prototype.moveCollision = function (targetPos) {\n    this.x = targetPos.x;\n    this.y = targetPos.y;\n}\n\n// var EasingFunctions = {\n//     linear: function (t) { return t },\n//     easeInQuad: function (t) { return t * t },\n//     easeOutQuad: function (t) { return t * (2 - t) },\n//     easeInOutQuad: function (t) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t },\n//     easeInCubic: function (t) { return t * t * t },\n//     easeOutCubic: function (t) { return (--t) * t * t + 1 },\n//     easeInOutCubic: function (t) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1 },\n//     easeInQuart: function (t) { return t * t * t * t },\n//     easeOutQuart: function (t) { return 1 - (--t) * t * t * t },\n//     easeInOutQuart: function (t) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t },\n//     easeInQuint: function (t) { return t * t * t * t * t },\n//     easeOutQuint: function (t) { return 1 + (--t) * t * t * t * t },\n//     easeInOutQuint: function (t) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t }\n// }\n\n// FIXME find you to apply lerp to angle/rotation\n/**\n * @param {Vector2} targetPos\n * @param {Number} lerpPourcent\n */\nGameComponent.prototype.lerpAngle = function (targetPos, lerpPourcent) {\n    // if (this.angle == this.directionAngle) {\n    //     this.angle = Helper.angleFromDirection(this.physicsBody.center, targetPos);\n    // } else {\n    //     this.angle += Helper.angleFromDirection(this.physicsBody.center, targetPos) * lerpPourcent;\n    // }\n    this.angle = Helper.angleFromDirection(this.physicsBody.center, targetPos);\n    this.oppositeAngle = Helper.oppositeAngleFromDirection(this.physicsBody.center, targetPos);\n}\n\n// GameComponent.getDirectionAngle = function (targetPos) {\n//     this.directionAngle = Helper.angleFromDirection(this.physicsBody.center, targetPos);\n// }\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Circle/Ractangle/Vector2} physicsBody\n * @param {Number} angle\n * @param {Number} offset\n */\nGameComponent.prototype.update = function (physicsBody = null, angle = null, offset = null) {\n    if (physicsBody && angle) {\n        this.physicsBody.update(physicsBody);\n        this.angle = angle;\n    } else {\n        this.physicsBody.update(this.center);\n    }\n    if (this.debug.flagDebug) {\n        this.segment.update(this.physicsBody.center, this.vectorAngle);\n    }\n\n    if (offset) {\n        this.offset = offset;\n    }\n\n    this.backPosition = this.oppositeVectorAngle;\n};\n\nGameComponent.prototype.unitAnimation = function () {\n    this.animateTile++\n    if (this.animateTile >= this.animateTileMax) {\n        this.animateTile = 0;\n    }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nGameComponent.prototype.render = function (ctx) {\n    // save the unrotated context of the canvas so we can restore it later\n    // the alternative is to untranslate & unrotate after drawing\n    ctx.save();\n    // move to the center of the physics body\n    ctx.translate(this.physicsBody.x, this.physicsBody.y);\n    // rotate the canvas to the specified angle\n    ctx.rotate(this.angle);\n\n    // TODO add animation for other physicsBody type\n    // Also take specific render in corresponding constructor\n    // draw the image\n    // since the context ctx is rotated, the image will be rotated also\n    // Draw for a circle\n    if (this.physicsBody.radius) {\n        if (this.animateUnit) {\n            ctx.drawImage(\n                this.graphicsBody,\n                (this.graphicsBody.width / this.animateTileMax) * this.animateTile,\n                0,\n                this.graphicsBody.width / this.animateTileMax,\n                this.graphicsBody.height,\n                - this.physicsBody.radius,\n                - this.physicsBody.radius,\n                this.physicsBody.boundingRect.width,\n                this.physicsBody.boundingRect.height\n            );\n            this.unitAnimation();\n        // } else if (this.randomCannon) {\n        //     ctx.drawImage(\n        //         this.graphicsBody,\n        //         this.graphicsBodyOffsetX + this.physicsBody.radius,\n        //         this.graphicsBodyOffsetY + this.physicsBody.radius,\n        //         this.graphicsBody.width / 3,\n        //         this.graphicsBody.height / 3,\n        //         - this.physicsBody.radius,\n        //         - this.physicsBody.radius,\n        //         this.physicsBody.boundingRect.width,\n        //         this.physicsBody.boundingRect.height\n        //     );\n        } else {\n            ctx.drawImage(\n                this.graphicsBody,\n                - this.physicsBody.radius,\n                - this.physicsBody.radius,\n                this.physicsBody.boundingRect.width,\n                this.physicsBody.boundingRect.height\n            );\n        }\n    } else {\n        ctx.drawImage(\n            this.graphicsBody,\n            0,\n            0,\n            this.physicsBody.width,\n            this.physicsBody.height\n        );\n    }\n    // we’re done with the rotating so restore the unrotated context\n    ctx.restore();\n\n    // For DEBUG\n    if (this.debug.flagDebug) {\n        this.physicsBody.render(ctx, 'blue');\n        if (this.debug.flagDebug) {\n            this.segment.render(ctx, 'blue');\n        }\n        // TODO: add different level for debug: eg: debug.level = 1/2/3 ...\n        if (this.debug.debugLevel > 1) {\n            this.physicsBody.center.render(new Vector2(this.canvas.clientLeft, this.canvas.clientTop), ctx, 'white');\n        }\n    }\n};\n\nObject.defineProperties(GameComponent.prototype, {\n    center: {\n        get: function () {\n            return new Vector2(this.x, this.y);\n        }\n    },\n    position: {\n        get: function () {\n            return new Vector2(this.physicsBody.center.x, this.physicsBody.center.y);\n        },\n        set: function (newPos) {\n            this.physicsBody.center.x = newPos.x;\n            this.physicsBody.center.y = newPos.y;\n        }\n    },\n    // in degrees\n    rotation: {\n        get: function () {\n            // TODO add Utils.RAD_TO_DEG and DEG_TO_RAD const\n            return this.angle * 180 / Math.PI;\n        }\n    },\n    vectorAngle: {\n        get: function () {\n            // add this.physicsBody.centerx and this.physicsBody.center.y for relative computation\n            // also check if rectangle or circle\n            if (this.physicsBody.radius) {\n                var angleX = this.physicsBody.radius * Math.cos(this.angle) + this.physicsBody.center.x;\n                var angleY = this.physicsBody.radius * Math.sin(this.angle) + this.physicsBody.center.y;\n            } else {\n                // Rectangle\n                if (this.physicsBody.width > this.physicsBody.height) {\n                    var angleX = this.physicsBody.width / 2 * Math.cos(this.angle) + this.physicsBody.center.x;\n                    var angleY = this.physicsBody.width / 2 * Math.sin(this.angle) + this.physicsBody.center.y;\n                } else {\n                    var angleX = this.physicsBody.height / 2 * Math.cos(this.angle) + this.physicsBody.center.x;\n                    var angleY = this.physicsBody.height / 2 * Math.sin(this.angle) + this.physicsBody.center.y;\n                }\n            }\n            return new Vector2(angleX, angleY);\n        },\n        set: function (newVectorAngle) {\n            this.vectorAngle = newVectorAngle;\n        }\n    },\n    oppositeVectorAngle: {\n        get: function () {\n            if (this.physicsBody.radius) {\n                var angleX = (this.physicsBody.radius + this.offset) * Math.cos(this.oppositeAngle) + this.physicsBody.center.x;\n                var angleY = (this.physicsBody.radius + this.offset) * Math.sin(this.oppositeAngle) + this.physicsBody.center.y;\n            } else {\n                // Rectangle\n                if (this.physicsBody.width > this.physicsBody.height) {\n                    var angleX = (this.physicsBody.width / 2 + this.offset) * Math.cos(this.oppositeAngle) + this.physicsBody.center.x;\n                    var angleY = (this.physicsBody.width / 2 + this.offset) * Math.sin(this.oppositeAngle) + this.physicsBody.center.y;\n                } else {\n                    var angleX = (this.physicsBody.height / 2 + this.offset) * Math.cos(this.oppositeAngle) + this.physicsBody.center.x;\n                    var angleY = (this.physicsBody.height / 2 + this.offset) * Math.sin(this.oppositeAngle) + this.physicsBody.center.y;\n                }\n            }\n            return new Vector2(angleX, angleY);\n        }\n    }\n});\n","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// primitives\nimport Vector2 from './vector';\nimport Circle from './circle';\n\n/**\n * Rectangle: add a rectangle as physicsBody for gameComponents\n * @param {Number} x \n * @param {Number} y \n * @param {Number} width \n * @param {Number} height \n */\nexport default function Rectangle(x, y, width, height) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.width = width || 0;\n  this.height = height || 0;\n}\n\n/**\n * @param: {number} s - the scale\n * @return: {this} The Vector2 instance scaled\n */\nRectangle.prototype.scale = function (s) {\n  if (isFinite(s)) {\n      this.x = this.x * s;\n      this.y = this.y * s;\n      this.width = this.width * s;\n      this.height = this.height * s;\n  } else {\n      this.x = 0;\n      this.y = 0;\n  }\n  //return this;\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Vector2} v\n */\nRectangle.prototype.update = function (v) {\n  this.x = v.x;\n  this.y = v.y;\n};\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {String} color\n */\nRectangle.prototype.render = function (ctx, color) {\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 5;\n  ctx.beginPath();\n  ctx.strokeRect(this.x, this.y, this.width, this.height);\n  ctx.stroke();\n  ctx.closePath();\n};\n\nObject.defineProperties(Rectangle.prototype, {\n  area: {\n    get: function () {\n      return this.width * this.height;\n    }\n  },\n  center: {\n    get: function () {\n      return new Vector2(this.x + (this.width / 2), this.y + (this.height / 2));\n    }\n  }\n});","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// primitives\nimport Vector2 from './vector';\nimport Rectangle from './rectangle';\n\n/**\n * Circle: add a circle physicsBody for gameComponents\n * @param {Number} x \n * @param {Number} y \n * @param {Number} radius \n */\nexport default function Circle(x, y, radius) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.radius = radius || 0;\n\n    this.boundingCirc = this;\n    this.boundingRect = new Rectangle(this.x, this.y, this.radius * 2, this.radius * 2);\n}\n\n/**\n * @param: {number} s - the scale\n * @return: {this} The Vector2 instance scaled\n */\nCircle.prototype.scale = function (s) {\n    if (isFinite(s)) {\n        this.x = this.x * s;\n        this.y = this.y * s;\n        this.radius = this.radius * s;\n    } else {\n        this.x = 0;\n        this.y = 0;\n    }\n    //return this;\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Vector2} targetPos\n */\nCircle.prototype.update = function (targetPos) {\n    this.x = targetPos.x;\n    this.y = targetPos.y;\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {String} color\n */\nCircle.prototype.render = function (ctx, color) {\n    ctx.strokeStyle = color;\n    ctx.lineWidth = 5;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.closePath();\n}\n\nObject.defineProperties(Circle.prototype, {\n    area: {\n        get: function () {\n            return this.radius * this.radius * Math.PI;\n        }\n    },\n    diameter: {\n        get: function () {\n            return this.radius * 2;\n        }\n    },\n    circumference: {\n        get: function () {\n            return 2 * Math.PI * this.radius;\n        }\n    },\n    // Useless ? this.x and this.y already point to circle center\n    center: {\n        get: function () {\n            return new Vector2(this.x, this.y);\n        }\n    },\n    randomPoint: {\n        get: function () {\n            let randAngle = Math.random() * 2 * Math.PI;\n            let radius = this.radius * Math.sqrt(Math.random());\n\n            let x = radius * Math.cos(randAngle) + this.center.x;\n            let y = radius * Math.sin(randAngle) + this.center.y;\n\n            return new Vector2(x, y);\n        }\n    }\n});","export default __webpack_public_path__ + \"88f1e89a8a30b15cdb041b879a12cadd.png\";","export default __webpack_public_path__ + \"bee9434ccd5b155955371486c1ff12cb.png\";","export default __webpack_public_path__ + \"5f7c88e8b053ce38814d93155f8a719b.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// Primitives\nimport Circle from '../../geometry/circle';\nimport Vector2 from '../../geometry/vector';\n\n// Game Components\nimport GameComponent from '../gameComponent';\n\n// Ressources\nimport projectileImg from './img/projectileDefault.png';\nimport projectileGreenImg from './img/projectileGreen.png';\nimport projectileRedImg from './img/projectileRed.png';\n\n// Others\nimport Helper from '../../geometry/helper';\nimport Collision from '../../collision';\nimport Player from '../player/player';\n\n/**\n * @param {Number} id - keep track of every projectiles\n */\nvar id = 0;\n//var projectileArr = [];\n\n/**\n * Projectile fired from cannon\n * \n * @param {HTMLCanvasElement} canvas \n * @param {Vector2} startPos \n * @param {Vector2} targetCenterPos\n * @param {String} projectileColor\n * @param {Boolean} debug \n */\nexport default function Projectile(canvas, startPos, target, projectileColor, enemyArr, debug) {\n  this.canvas = canvas;\n\n  this.radius = 4;\n\n  this.baseDamage = 10;\n\n  let physicsBody = new Circle(startPos.x, startPos.y, this.radius);\n  let graphicsBody = new Image(this.radius * 2, this.radius * 2);\n  switch (projectileColor) {\n    case 'red':\n      graphicsBody.src = projectileRedImg;\n      break;\n    case 'green':\n      graphicsBody.src = projectileGreenImg;\n      break;\n    default:\n      graphicsBody.src = projectileImg;\n      break;\n  }\n\n  this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, false, false, debug);\n  this.vector2Direction = new Vector2.substract(target.gameComponent.physicsBody.center, physicsBody.center);\n  \n  // Add some little randomness\n  if (Math.floor(Math.random() * 2)) {\n    this.vector2Direction.x += Math.round(Math.random() * 100);\n    this.vector2Direction.y += Math.round(Math.random() * 100);\n  } else {\n    this.vector2Direction.x -= Math.round(Math.random() * 100);\n    this.vector2Direction.y -= Math.round(Math.random() * 100);\n\n  }\n\n  this.angle = Helper.angleFromDirection(startPos, target.gameComponent.physicsBody.center);\n\n  this.destroyed = false;\n\n  this.enemyArr = enemyArr;\n\n  // Global variables\n  this.id = id++;\n  //projectileArr.push(this);\n\n  this.debug = debug;\n}\n\n/**\n * Test position of every enemy\n * @param {game_components: player/enemy} target\n */\nProjectile.prototype.moveDirection = function (target) {\n  if (this.enemyArr.length && target != undefined) {\n    // projectiles from player\n    this.enemyArr.forEach(enemy => {\n      if (Collision.circlesCollision(this.gameComponent.physicsBody, enemy.gameComponent.physicsBody)) {\n        // destroy the projectile\n        enemy.getHit(this.baseDamage);\n        this.destroyed = true;\n        // FIXME remove instance when projectile is off screen\n      } else if (Collision.circleCanvasCollision(this.gameComponent.physicsBody, this.canvas)) {\n        this.destroyed = true;\n      }\n    })\n  }\n  // projectiles from enemy\n  // test if target == player to avoid projectiles to disappear\n  if (target.id === 'player') {\n    if (Collision.circlesCollision(this.gameComponent.physicsBody, target.gameComponent.physicsBody)) {\n      // enemy follow the target satelliteRadius path, which is a circle\n      target.getHit(this.baseDamage);\n      this.destroyed = true;\n      \n      // FIXME remove instance when projectile is off screen\n    } else if (Collision.circleCanvasCollision(this.gameComponent.physicsBody, this.canvas)) {\n      this.destroyed = true;\n    }\n  }\n  this.gameComponent.moveNoLerp(this.vector2Direction, this.angle, 5);\n}\n\n\n// Set the projectile destroyed for Garbage Collector\n// FIXME projectiles that still alive (!destroyed) when enemy is destroyed are destroyed\n// Cannon is deleted by garbage collector so projectiles associated are deleted...\n// FIXE THAT !\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nProjectile.prototype.update = function () {\n  this.gameComponent.update();\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nProjectile.prototype.render = function (ctx) {\n  this.gameComponent.render(ctx);\n}","export default __webpack_public_path__ + \"772654657d77ddba04a4e274300ce25b.png\";","export default __webpack_public_path__ + \"f5b2adf2a1e44aa08acbdf4e1846ab26.png\";","export default __webpack_public_path__ + \"431ba2a453686a660576666e18d93e96.png\";","export default __webpack_public_path__ + \"6187e2991ccbdafb05a515ae0562f28b.png\";","export default __webpack_public_path__ + \"987b7ca451717e7bc42b9a20b08a3a26.png\";","export default __webpack_public_path__ + \"b4c56d869b7c343119b4c96f5a2e239c.png\";","export default __webpack_public_path__ + \"7b97e219b741260cd1dd8dc2b1352639.png\";","export default __webpack_public_path__ + \"22ff7ff2693a1fe8ceeab0218312a28c.png\";","export default __webpack_public_path__ + \"f9b5266bf4e84d047af4ffd801211850.png\";","export default __webpack_public_path__ + \"ce89fe5a9dde010639b81344372de76f.png\";","export default __webpack_public_path__ + \"ad79d38a9043deb7fa2828094a2bdc6f.mp3\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// Game Objects\nimport GameComponent from \"../gameComponent\";\nimport Projectile from '../projectiles/projectile';\n\n// Primitives\nimport Circle from \"../../geometry/circle\";\n//import Vector2 from \"../../geometry/vector\";\n\n// Ressources\nimport cannonPlayerImg from './img/cannonPlayer.png';\n\nimport cannonEnemyHTML from './img/cannonEnemyHTML.png';\nimport cannonEnemyCSS from './img/cannonEnemyCSS.png';\nimport cannonEnemyNode from './img/cannonEnemyNode.png';\nimport cannonEnemyMeteor from './img/cannonEnemyMeteor.png';\nimport cannonEnemyJS from './img/cannonEnemyJS.png';\nimport cannonEnemySQL from './img/cannonEnemySQL.png';\nimport cannonEnemyMongo from './img/cannonEnemyMongo.png';\nimport cannonEnemyPHP from './img/cannonEnemyPHP.png';\nimport cannonEnemyAngular from './img/cannonEnemyAngular.png';\n\nimport laserSound from '../../sounds/laser.mp3';\n\nimport Helper from \"../../geometry/helper\";\n\n// Base on requestAnimationFrame time\n// Fire each second at basis, changed with fireRate\nvar baseFireRate = 5;\n\n/**\n * \n * @param {HTMLCanvasElement} canvas \n * @param {Circle/Rectangle/Vector2} physicsBodyAttached \n * @param {Number} radius \n * @param {String} color - the color of projectile\n * @param {String} typeCannon - for graphicsBody\n * @param {Boolean} debug \n */\nexport default function Cannon(canvas, physicsBodyAttached, radius, projectileColor, fireRate, typeCannon, debug) {\n    this.canvas = canvas;\n\n    this.radius = radius;\n\n    let physicsBody = new Circle(physicsBodyAttached.center.x, physicsBodyAttached.center.y, this.radius);\n    let graphicsBody = new Image();\n\n    this.randomCannon = false;\n\n    this.laser = new Audio();\n    this.laser.src = laserSound;\n    this.laser.played.time\n\n    switch (typeCannon) {\n        case 'player':\n            graphicsBody.src = cannonPlayerImg;\n            break;\n        case 'enemy':\n            let random = Math.floor(Math.random() * 9);\n            switch (random) {\n                case 0: graphicsBody.src = cannonEnemyAngular;\n                    break;\n                case 1: graphicsBody.src = cannonEnemyCSS;\n                    break;\n                case 2: graphicsBody.src = cannonEnemyHTML;\n                    break;\n                case 3: graphicsBody.src = cannonEnemyMeteor;\n                    break;\n                case 4: graphicsBody.src = cannonEnemyNode;\n                    break;\n                case 5: graphicsBody.src = cannonEnemySQL;\n                    break;\n                case 6: graphicsBody.src = cannonEnemyMongo;\n                    break;\n                case 7: graphicsBody.src = cannonEnemyPHP;\n                    break;\n                case 8: graphicsBody.src = cannonEnemyJS;\n                    break;\n                default: break;\n            }\n        default: break;\n    }\n\n    this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, false, this.randomCannon, debug);\n\n    this.flagFiring = false;\n    this.aggro = false;\n    this.fireRate = fireRate;\n    // add random to baseFireRate with fireRate\n    this.finalFireRate = baseFireRate + Math.random() * 300 * this.fireRate;\n\n    this.fireTimeCount = 0;\n    this.fireAngle = 0;\n\n    this.projectileColor = projectileColor;\n\n    this.target = null;\n\n    this.projectileArr = [];\n\n\n    this.debug = debug;\n}\n\n/**\n * @param {game_components: player/ennemy/...} target\n * FIXME simplify the logic !\n */\nCannon.prototype.fireAtTarget = function (target, enemyArr = []) {\n    // TODO the first fire should take current this.gameComponent position in account  \n    this.target = target;\n    this.aggro = true;\n\n    if (target !== undefined) {\n        this.angleToTarget(target);\n        if (this.flagFiring) {\n            var projectile = new Projectile(this.canvas, this.gameComponent.physicsBody.center, target, this.projectileColor, enemyArr, this.debug);\n            this.projectileArr.push(projectile);\n            // FIXME too much sound, make the game laggy\n            // this.laser.play();\n            this.flagFiring = false;\n        } else {\n            // Add delay between each fire\n            this.fireTimeCount++;\n            if (this.fireTimeCount >= this.finalFireRate) {\n                this.finalFireRate = baseFireRate + Math.random() * 300 * this.fireRate;\n                this.flagFiring = true;\n                this.fireTimeCount = 0;\n            }\n        }\n    }\n}\n\n/**\n * @param {Vector2} target\n */\nCannon.prototype.angleToTarget = function (target) {\n    this.fireAngle = Helper.angleFromDirection(this.gameComponent.physicsBody.center, target.gameComponent.physicsBody.center);\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Circle/Rectangle/Vector2} physicsBody\n * @param {Float} angle\n */\nCannon.prototype.update = function (physicsBody, angle) {\n    if (this.aggro) {\n        this.gameComponent.update(physicsBody, this.fireAngle);\n    } else {\n        this.gameComponent.update(physicsBody, angle);\n    }\n\n    // update projectiles and remove the ones destroyed\n    // FIXME Move this block outside cannon/enemy/player/etc...\n    // to avoid deleted projectiles when game_component is deleted\n    if (this.projectileArr.length) {\n        for (let i = 0; i < this.projectileArr.length; i++) {\n            if (this.projectileArr[i].destroyed) {\n                this.projectileArr.splice(i, 1);\n            } else {\n                this.projectileArr[i].update();\n                this.projectileArr[i].moveDirection(this.target);\n            }\n        }\n    }\n};\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nCannon.prototype.render = function (ctx) {\n    // IMPORANT order of rendering matters ! last is rendered in front\n    if (this.projectileArr.length) {\n        this.projectileArr.forEach(projectile => {\n            projectile.render(ctx);\n        });\n    }\n    this.gameComponent.render(ctx);\n};\n\n","export default __webpack_public_path__ + \"faf1fcde2f4243d1105397c1d1ec7479.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// Primitives\nimport Circle from \"../../geometry/circle\";\n\n/**\n * Display health ui around the gameComponent\n * Green for life, red for missing life, blue for shield\n * ui is separated so it can be turned on/off while playing\n * @param {HTMLCanvasElement} canvas \n * @param {Circle/Reactangle} physicsBody\n * @param {Number} startHealth\n * @param {Number} startShield\n * @param {Boolean} debug \n */\nexport default function UiHealth(physicsBody, startHealth, startShield, debug) {\n    this.physicsBody = physicsBody;\n\n    this.startHealth = startHealth;\n    this.currentHealth = startHealth;\n    this.currentHealthPourcent = 100;\n\n    this.currentShield = startShield;\n\n    this.debug = debug;\n}\n\n/**\n * @param {Number} health\n * @param {Number} shield\n */\nUiHealth.prototype.updateHealthAndShield = function(health, shield) {\n    this.currentHealth = health;\n    this.currentShield = shield;\n}\n\nUiHealth.prototype.displayHealth = function() {\n    this.currentHealthPourcent = this.currentHealth * 100 / this.startHealth;\n    return 2 * Math.PI * (this.currentHealthPourcent / 100);\n}\n\n// 2 * Math.PI = 100 shield\n// FIXME when it return more than 2 * Math.PI, there's no indication about the current shield\n// Maybe add another function to display super shield, or change rgb values ?\n// Or set a maxShield = 100\nUiHealth.prototype.displayShield = function() {\n    return this.currentShield * (2 * Math.PI / 100);\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Vector2} positionCenter\n */\nUiHealth.prototype.update = function (positionCenter) {\n    this.physicsBody = positionCenter;\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nUiHealth.prototype.render = function (ctx) {\n    // Display empty health\n    // ctx.strokeStyle =  \"rgba(255, 0, 0, 0.5)\";;\n    // ctx.lineWidth = 8;\n    // ctx.beginPath();\n    // ctx.arc(this.physicsBody.center.x, this.physicsBody.center.y, this.physicsBody.radius + ctx.lineWidth, 0, 2 * Math.PI );\n    // ctx.stroke();\n    // ctx.closePath();\n    \n    // Display current health\n    // ctx.strokeStyle =  \"rgba(125, 246, 81, 1)\";;\n    ctx.strokeStyle =  \"rgba(0, 255, 0, 1)\";;\n    ctx.lineWidth = 4;\n    ctx.beginPath();\n    ctx.arc(this.physicsBody.center.x, this.physicsBody.center.y, this.physicsBody.radius + ctx.lineWidth, 0, this.displayHealth());\n    ctx.stroke();\n    ctx.closePath();\n    \n    // Display current shield\n    ctx.strokeStyle =  \"rgba(65, 93, 246, 1)\";\n    ctx.lineWidth = 4;\n    ctx.beginPath();\n    ctx.arc(this.physicsBody.center.x, this.physicsBody.center.y, this.physicsBody.radius + ctx.lineWidth, 0, this.displayShield());\n    ctx.stroke();\n    ctx.closePath();\n\n}","export default __webpack_public_path__ + \"81eacd5d08421e92f262b70dc2c4c644.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\n// Primitives\nimport Rectangle from '../../geometry/rectangle';\nimport Circle from '../../geometry/circle';\n\n// Game Components\nimport GameComponent from '../gameComponent';\n\n// Ressources\nimport reactorImg from './img/reactorDefault.png';\nimport Vector2 from '../../geometry/vector';\n\n/**\n * Reactor: add a reactor behind player position for movement and particles\n * FIXME !!! offset is in player/enemy/gameComponent and here. Bad\n * @param {HTMLCanvasElement} canvas \n * @param {gameComponent} gameComponentsAttached \n * @param {Float} angle \n * @param {Boolean} debug \n */\nexport default function Reactor(canvas, physicsBodyAttached, angle, debug) {\n    this.width = 160;\n    this.height = 80;\n    this.angle = angle;\n\n    this.offset = 20;\n\n    let physicsBody = new Rectangle(physicsBodyAttached.center.x - physicsBodyAttached.radius, physicsBodyAttached.center.y, this.width, this.height);\n    let graphicsBody = new Image(this.width, this.height);\n    graphicsBody.src = reactorImg;\n    // For tilesSprite animation\n    graphicsBody.animate = true;\n\n    this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, false, false, debug);\n\n    this.debug = debug;\n}\n\n/**\n * @param {Circle, Rectangle, ...} physicsBody\n * @param {Float} angle\n */\nReactor.prototype.update = function (physicsBody, angle) {\n    this.gameComponent.update(physicsBody, angle);\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nReactor.prototype.render = function (ctx) {\n    this.gameComponent.render(ctx);\n}\n\n","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// Game Components\nimport GameComponent from '../gameComponent';\nimport Cannon from '../cannon/cannon';\nimport Collision from '../../collision';\n\n// Primitives\nimport Rectangle from '../../geometry/rectangle';\nimport Vector2 from '../../geometry/vector';\nimport Circle from '../../geometry/circle';\n\nimport Helper from '../../geometry/helper';\n\n// Ressources\nimport playerImg from './img/player_spriteTile.png';\nimport UiHealth from '../../ui/game_components/uiHealth';\nimport Reactor from '../reactor/reactor';\n\nvar id = 'player';\n\n/**\n * \n * @param {HTMLCanvasElement} canvas \n * @param {Vector2} startPos \n * @param {Boolean} debug \n */\nexport default function Player(canvas, startPos, scale, debug) {\n  this.canvas = canvas;\n  this.id = id;\n\n  this.width = 100 * scale;\n  this.height = 100 * scale;\n\n  this.radius = 25 * scale;\n\n  // TODO: bug if health < 100\n  this.health = 100;\n  this.shield = 100;\n\n  this.score = 0;\n\n  let physicsBody = new Circle(startPos.x, startPos.y, this.radius);\n\n  // Create an HTMLImageElement\n  let graphicsBody = new Image();\n  graphicsBody.src = playerImg;\n\n  // Create the gameComponent for physicsBody, graphicsBody, etc...\n  // the gameComponent hold the physic computation\n  this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, true, false, debug);\n  this.aggroRadius = new Circle(physicsBody.center.x, physicsBody.center.y, 400);\n  this.satelliteRadius = new Circle(physicsBody.center.x, physicsBody.center.y, 200);\n  this.cannon = new Cannon(canvas, physicsBody, 15, 'green', 0.000005, 'player', debug);\n  //this.reactor = new Reactor(canvas, physicsBody, this.gameComponent.angle, debug);\n  //this.reactorOffset = this.reactor.offset;\n  // UI\n  this.uiHealth = new UiHealth(physicsBody, this.health, this.shield, debug);\n\n\n  this.aggro = false;\n  this.enemyInAggroArr = []; // array of enemies id\n  this.flagEnemyInAggroRadius = false; // true if there's 1 enemy in aggro radius\n\n  this.destroyed = false;\n\n  this.startGamePos = new Vector2(this.canvas.width / 2, this.canvas.height / 2);\n  this.vector0 = new Vector2(0, 0);\n\n  this.debug = debug;\n};\n\n/**\n * @param {Vector2} targetPos\n */\nPlayer.prototype.moveTouch = function (targetPos) {\n\n  if (Collision.circleCanvasCollision(this.gameComponent.physicsBody, this.canvas)) {\n    this.gameComponent.moveCollideWithCanvas(targetPos, this.gameComponent.angle);\n  } else {\n    this.gameComponent.moveLerp(targetPos, 0.02);\n  }\n\n}\n\n/**\n * Move from bottom to center of canvas\n * @return {Boolean} false while player didn't reach the center of canvas\n */\nPlayer.prototype.reachStartPos = function () {\n  this.gameComponent.moveLerp(this.startGamePos, 0.02);\n  if (parseInt(this.gameComponent.physicsBody.y) == parseInt(this.canvas.height / 2)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * IMPORTANT player need a killing order to avoid shotting a random enemy based on fireAtTarget count !!!\n * killing order is FIFO pile\n * FIXME when an enemy is aggro, player stop firing..\n * @param {Array} enemyArr\n */\nPlayer.prototype.detectTargetInAggroRadius = function (enemyArr) {\n  // check collision with player and aggro radius of enemy\n  enemyArr.forEach(enemy => {\n    // If player collide with an enemy aggro radius, add id to an Array\n    if (Collision.circlesCollision(this.aggroRadius, enemy.gameComponent.physicsBody)) {\n      if (!this.enemyInAggroArr.includes(enemy.id)) {\n        this.enemyInAggroArr.push(enemy.id);\n      }\n    } else {\n      // Remove id of enemies that are no more in player aggro radius but still alive\n      if (this.enemyInAggroArr.includes(enemy.id)) {\n        var enemyIndex = this.enemyInAggroArr.indexOf(enemy.id);\n        this.enemyInAggroArr.splice(enemyIndex, 1);\n      }\n    }\n  });\n\n  if (this.enemyInAggroArr.length !== 0) {\n    this.attackTargetInAggroRadius(enemyArr);\n  } else {\n    this.stopAggro();\n  }\n};\n\n/**\n * @param {Array} enemyArr\n */\nPlayer.prototype.attackTargetInAggroRadius = function (enemyArr) {\n  if (enemyArr.length !== 0) {\n    this.aggro = true;\n    this.cannon.aggro = true;\n    // Attack the first target in enemyInAggroArr\n    var target = null;\n    enemyArr.forEach(enemy => {\n      if (this.enemyInAggroArr[0] == enemy.id) {\n        target = enemy;\n      }\n    })\n    if (target == undefined) {\n      console.log('bug !');\n      this.stopAggro();\n    }\n    // add enemyArr so projectiles can shot any enemy while firing at target\n    this.cannon.fireAtTarget(target, enemyArr);\n  } else {\n    this.stopAggro();\n  }\n}\n\nPlayer.prototype.stopAggro = function () {\n  this.aggro = false;\n  this.cannon.aggro = false;\n  this.enemyInAggroArr = [];\n}\n\n/**\n * @param {Number} damage - damage from projectiles\n */\nPlayer.prototype.getHit = function (damage) {\n  if (this.shield > 0) {\n    this.shield -= damage / 2;\n    this.score -= 5;\n  } else {\n    this.shield = 0;\n    this.health -= damage;\n    this.score -= 15;\n    if (this.health <= 0) {\n      this.health = 0;\n      this.destroyed = true;\n    }\n  }\n}\n\nPlayer.prototype.regenerateHealth = function () {\n  if (this.health < 100) {\n    this.health += 0.1;\n    if (this.health >= 100) {\n      this.health = 100;\n    }\n  }\n}\n\n/**\n * @param {Number} shield\n */\nPlayer.prototype.gainShield = function (shield) {\n  if(this.shield < 100) {\n    this.shield += shield;\n    if (this.shield >= 100) {\n      this.shield = 100;\n    }\n  }\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {Array} enemyArr - array of enemies object\n */\nPlayer.prototype.update = function (enemyArr) {\n  // Logic\n  this.detectTargetInAggroRadius(enemyArr);\n  this.regenerateHealth();\n\n  // Physics\n  this.gameComponent.update(null, null, this.reactorOffset); // update offset of reactor\n  this.aggroRadius.update(this.gameComponent.physicsBody);\n  this.satelliteRadius.update(this.gameComponent.physicsBody);\n  this.cannon.update(this.gameComponent.physicsBody, this.gameComponent.angle);\n  //this.reactor.update(this.gameComponent.backPosition, this.gameComponent.angle);\n  // UI\n  this.uiHealth.update(this.gameComponent.physicsBody);\n  this.uiHealth.updateHealthAndShield(this.health, this.shield);\n};\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nPlayer.prototype.render = function (ctx) {\n  if (!this.destroyed) {\n    // Physcis\n    //this.reactor.render(ctx);\n    this.gameComponent.render(ctx);\n    this.cannon.render(ctx);\n  \n    // UI\n    this.uiHealth.render(ctx);\n  \n    if (this.debug.flagDebug) {\n      this.satelliteRadius.render(ctx, 'yellow');\n      // TODO only true for 1 enemy\n      if (!this.aggro) {\n        this.aggroRadius.render(ctx, 'red');\n      } else {\n        this.aggroRadius.render(ctx, 'green');\n      }\n    }\n  }\n};\n\n","export default __webpack_public_path__ + \"52066faa494a41ab2addb424c1eb1ced.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n// primitives\nimport Circle from '../../geometry/circle';\nimport Vector2 from '../../geometry/vector';\n\nimport Helper from '../../geometry/helper';\nimport Projectile from '../projectiles/projectile';\nimport Collision from '../../collision';\n\n// Ressources\nimport enemyImg from './img/enemy_spriteTile.png';\nimport GameComponent from '../gameComponent';\nimport Cannon from '../cannon/cannon';\nimport UiHealth from '../../ui/game_components/uiHealth';\nimport Reactor from '../reactor/reactor';\n\n/**\n * \n * @param {HTMLCanvasElement} canvas \n * @param {Vector2} startPos \n * @param {Boolean} debug \n */\n\n// Global variables\nvar id = 0;\n\nexport default function Enemy(canvas, startPos, debug) {\n  this.canvas = canvas;\n  this.radius = 15;\n\n  // TODO enemy and player are generic objects, health should be set in abstract objects\n  this.health = 200;\n  this.shield = 0;\n\n  this.score = 0;\n\n  this.id = id++;\n\n  let physicsBody = new Circle(startPos.x, startPos.y, this.radius, true);\n  let graphicsBody = new Image();\n  graphicsBody.src = enemyImg;\n\n  this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, true, false, debug);\n  this.aggroRadius = new Circle(physicsBody.x, physicsBody.y, 300);\n  this.satelliteRadius = new Circle(physicsBody.x, physicsBody.y, 100);\n  this.cannon = new Cannon(canvas, physicsBody, 8, 'red', 0.1, 'enemy', debug);\n  //this.reactor = new Reactor(canvas, physicsBody, this.gameComponent.angle, debug);\n  //this.reactorOffset = this.reactor.offset;\n\n  // UI\n  this.uiHealth = new UiHealth(physicsBody, this.health, this.shield, debug);\n\n\n  this.aggro = false;\n  this.satellite = false;\n\n  this.reachStartPos = false;\n  this.reachRandPos = false;\n\n  let randomX = Math.round(Math.random() * (this.canvas.width - this.gameComponent.physicsBody.radius * 2)) + this.gameComponent.physicsBody.radius;\n  let randomY = Math.round(Math.random() * (this.canvas.height - this.gameComponent.physicsBody.radius * 2)) + this.gameComponent.physicsBody.radius;\n  this.randomPosInCanvas = new Vector2(randomX, randomY);\n  this.randomPos = this.aggroRadius.randomPoint;\n\n  this.destroyed = false;\n\n  // FIXME make an Array of enemy\n\n\n  this.debug = debug;\n};\n\n/**\n * @param {Vector2} target - player position\n */\nEnemy.prototype.moveStartPos = function (target) {\n  this.gameComponent.moveLerp(this.randomPosInCanvas, 0.005);\n\n  if (this.aggro && undefined !== target) {\n    // this.reachRandPos = true for strange but real behavior x)\n    this.reachStartPos = true;\n    this.moveToTarget(target);\n  } else if (Vector2.distance(this.randomPosInCanvas, this.gameComponent.physicsBody.center) <= 1) {\n    this.reachStartPos = true;\n  }\n}\n\n/**\n * @param {game_components: player/...} target\n */\nEnemy.prototype.move = function (target) {\n  if (!this.aggro && undefined !== target) {\n    this.moveRandom();\n  } else {\n    this.moveToTarget(target);\n  }\n\n  // if (Collision.circleCanvasCollision(this.gameComponent.physicsBody, this.canvas)) {\n  //   this.moveInCanvas();\n  // }\n};\n\nEnemy.prototype.moveInCanvas = function () {\n  this.randomPos = this.aggroRadius.randomPoint;\n  this.reachRandPos = false;\n  if (this.randomPos.x < this.canvas.width &&\n    this.randomPos.x > 0 &&\n    this.randomPos.y < this.canvas.height &&\n    this.randomPos.y < 0) {\n    this.reachRandPos = true;\n    this.moveRandom();\n  } else {\n    this.randomPos = this.aggroRadius.randomPoint;\n    this.reachRandPos = false;\n  }\n}\n\nEnemy.prototype.moveRandom = function () {\n  if (!this.reachRandPos) {\n    if (Collision.circleCanvasCollision(this.gameComponent.physicsBody, this.canvas)) {\n      this.gameComponent.moveCollideWithCanvas(this.randomPos);\n      this.reachRandPos = true;\n    } else {\n      this.gameComponent.moveLerp(this.randomPos, 0.02);\n    }\n\n    if (\n      parseInt(this.randomPos.x) == parseInt(this.gameComponent.physicsBody.x) ||\n      parseInt(this.randomPos.y) == parseInt(this.gameComponent.physicsBody.y)) {\n      this.reachRandPos = true;\n    }\n  } else {\n    // if (this.gameComponent.physicsBody.x > this.canvas.width ||\n    //   this.gameComponent.physicsBody.x < 0 ||\n    //   this.gameComponent.physicsBody.y > this.canvas.height ||\n    //   this.gameComponent.physicsBody.y < 0) {\n    //   // TODO use parseInt ?\n    //   this.randomPos = this.aggroRadius.randomPoint;\n    //   this.reachRandPos = true;\n    // } else {\n      this.randomPos = this.aggroRadius.randomPoint;\n      this.reachRandPos = false;\n    // }\n  }\n  this.cannon.aggro = false;\n};\n\n/**\n * @param {game_components: player/...} target\n */\nEnemy.prototype.moveToTarget = function (target) {\n  // when near the player, rotate as satelite around player\n  // TODO: take care of aggro radius < player satellite radius ?\n  this.cannon.fireAtTarget(target);\n  if (Collision.vector2CircleCollision(this.gameComponent.physicsBody.center, target.satelliteRadius)) {\n    // enemy follow the target satelliteRadius path, which is a circle\n    this.moveSatellite(target.aggroRadius);\n  } else {\n    this.gameComponent.moveLerp(target.gameComponent.physicsBody.center, 0.01);\n  }\n};\n\n/**\n * @param {Circle} aggroRadius\n */\nEnemy.prototype.moveSatellite = function (aggroRadius) {\n  // move around the player satelliteRadius\n  let x = this.gameComponent.physicsBody.x + aggroRadius * Math.cos(this.gameComponent.angle);\n  let y = this.gameComponent.physicsBody.y + aggroRadius * Math.sin(this.gameComponent.angle);\n}\n\n/**\n * @param {game_components player/...} target\n */\nEnemy.prototype.detectTargetInAggroRadius = function (target) {\n  // check collision with player and aggro radius of enemy\n  if (Collision.circlesCollision(this.aggroRadius, target.gameComponent.physicsBody)) {\n    this.aggro = true;\n    // rather than returning to the last position, take a new one\n    this.randomPos = this.aggroRadius.randomPoint;\n  } else {\n    this.aggro = false;\n  }\n};\n\n/**\n * @param {Number} damage - damage from projectiles\n */\nEnemy.prototype.getHit = function (damage) {\n  if (this.shield > 0) {\n    this.shield -= damage / 2;\n    this.score += 1;\n  } else {\n    this.shield = 0;\n    this.score += 2;\n    this.health -= damage;\n    if (this.health <= 0) {\n      this.health = 0;\n      this.destroyed = true;\n    }\n  }\n}\n\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * @param {player, enemy} target\n */\nEnemy.prototype.update = function (target) {\n  if (!this.destroyed) {\n    // Logic\n    this.detectTargetInAggroRadius(target);\n\n    // Physics\n    this.gameComponent.update(null, null, this.reactorOffset);\n    this.aggroRadius.update(this.gameComponent.physicsBody);\n    this.satelliteRadius.update(this.gameComponent.physicsBody);\n    this.cannon.update(this.gameComponent.physicsBody, this.gameComponent.angle);\n    //this.reactor.update(this.gameComponent.backPosition, this.gameComponent.angle);\n    // UI\n    this.uiHealth.update(this.gameComponent.physicsBody);\n    this.uiHealth.updateHealthAndShield(this.health, this.shield);\n  }\n};\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nEnemy.prototype.render = function (ctx) {\n  if (!this.destroyed) {\n    // UI\n    this.uiHealth.render(ctx);\n\n    // Physics\n    //this.reactor.render(ctx);\n    this.gameComponent.render(ctx);\n    this.cannon.render(ctx);\n\n    if (this.debug.flagDebug) {\n      this.satelliteRadius.render(ctx, 'yellow');\n      if (!this.aggro) {\n        this.aggroRadius.render(ctx, 'red');\n      } else {\n        this.aggroRadius.render(ctx, 'green');\n      }\n    }\n  }\n};","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n/**\n * Score: display score of player\n */\nexport default function Score(canvas) {\n    this.canvas = canvas;\n\n    this.scoreString = 'Score : ';\n    this.score = 0;\n}\n\n// Return the width in px of the String with score value\nScore.prototype.scoreStringTotalWdith = function() {\n    return (this.scoreString.length + this.score.toString().length) * 10;\n}\n\n/**\n * @param {Number} score\n */\nScore.prototype.update = function (newScore) {\n    if (newScore) this.score = newScore;\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nScore.prototype.render = function (ctx) {\n    ctx.fillStyle = \"white\";\n    ctx.font = \"bold 32px Monospace\";\n    ctx.fillText(`${this.scoreString + this.score}`, (this.canvas.width / 2) - this.scoreStringTotalWdith(), 50);\n}","export default __webpack_public_path__ + \"1dcca91fb58d16340896cba3540b7a72.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\n// Ressources\nimport planetsImg from './img/planets.png';\n\n/**\n * Same concept as Background. Add random parallax stars\n * TODO change size of stars depending on speed for realism\n * @param {HTMLCanvasElement} canvas \n * @param {Number} gameSpeed \n */\nexport default function BackgroundPlanets(canvas, gameSpeed) {\n    this.canvas = canvas;\n\n    this.backgroundGraphicsBody = new Image();\n    this.backgroundGraphicsBody.src = planetsImg;\n\n    // FIXME retrieve image size with onlaod ? \n    this.backgroundWidth = 507;\n    this.backgroundHeight = 512;\n\n    // TODO add gameSpeed in update function to change speed during game loop\n    this.gameSpeed = gameSpeed;\n    this.backgroundSpeed = this.randomSpeed(gameSpeed);\n\n    // TODO Ratio: not usefull right now\n    this.ratioW = this.backgroundWidth / this.canvas.width;\n    this.ratioH = this.backgroundHeight / this.canvas.height;\n\n    // Image source\n    this.backgroundSX = this.offsetSX();\n    this.backgroundSY = 0;\n\n    // Canvas destination position\n    this.backgroundDX = this.offsetDX();\n    this.backgroundDY = - this.backgroundHeight;\n}\n\nBackgroundPlanets.prototype.randomSpeed = function (gameSpeed) {\n    return gameSpeed * Math.round(Math.random() * 2) + 2; // + 1 to avoid 0 speed\n}\n\n/**\n * offset in SX image to choose randomly between 3 stars in tile\n */\nBackgroundPlanets.prototype.offsetSX = function () {\n    return Math.floor(Math.random() * 3) * this.backgroundWidth;\n}\n\n/**\n * offset in DX canvas so half of the start is always visible\n */\nBackgroundPlanets.prototype.offsetDX = function () {\n    return Math.random() * this.canvas.width - this.backgroundWidth / 2;\n}\n\n/**\n * Move background and others object in parallax from top to bottom screen. Then repeat\n */\nBackgroundPlanets.prototype.update = function () {\n    this.backgroundDY += this.backgroundSpeed;\n    if (this.backgroundDY >= this.canvas.height + this.backgroundHeight * 2) {\n        this.backgroundSX = this.offsetSX();\n        this.backgroundDX = this.offsetDX();\n        this.backgroundDY = - this.backgroundHeight;\n        this.backgroundSpeed = this.randomSpeed(this.gameSpeed);\n    }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nBackgroundPlanets.prototype.render = function (ctx) {\n    // Draw the background\n    ctx.drawImage(\n        this.backgroundGraphicsBody,\n        this.backgroundSX,\n        this.backgroundSY,\n        this.backgroundWidth,\n        this.backgroundHeight,\n        this.backgroundDX,\n        this.backgroundDY,\n        this.backgroundWidth,\n        this.backgroundHeight,\n    );\n}","export default __webpack_public_path__ + \"84efea0cdc51ec53b238a65b3ab3a29c.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\nimport starsImg from './img/stars.png';\nimport Background from './background';\n\n/**\n * BackgroundStars: create random stars in the background\n * @param {HTMLCanvasElement} canvas \n * @param {Number} gameSpeed \n */\nexport default function BackgroundStars(canvas, gameSpeed) {\n    this.canvas = canvas;\n    this.gameSpeed = gameSpeed;\n\n    this.backgroundGraphicsBody = new Image();\n    this.backgroundGraphicsBody.src = starsImg;\n\n    // FIXME retrieve image size with onlaod ? \n    this.backgroundWidth = 58;\n    this.backgroundHeight = 64;\n\n    this.randomSize = this.returnRandomSize();\n\n    // TODO add gameSpeed in update function to change speed during game loop\n    this.gameSpeed = gameSpeed;\n    this.backgroundSpeed = this.randomSpeed(gameSpeed);\n\n    // TODO Ratio: not usefull right now\n    this.ratioW = this.backgroundWidth / this.canvas.width;\n    this.ratioH = this.backgroundHeight / this.canvas.height;\n\n    // Image source\n    this.backgroundSX = this.offsetSX();\n    this.backgroundSY = 0;\n\n    // Canvas destination position\n    this.backgroundDX = this.offsetDX();\n    this.backgroundDY = - this.backgroundHeight;\n}\n\n/**\n * Return the random size for a star\n * @param {Number} - a random number between 1 and 3 include\n */\nBackgroundStars.prototype.returnRandomSize = function () {\n    return Math.floor(Math.random() * 4) + 4;\n}\n\nBackgroundStars.prototype.randomSpeed = function (gameSpeed) {\n    return gameSpeed * Math.round(Math.random() * 8) + 1; // + 1 to avoid 0 speed\n}\n\n\n/**\n * offset in SX image to choose randomly between 4 stars in tile\n */\nBackgroundStars.prototype.offsetSX = function () {\n    return Math.floor(Math.random() * 4) * this.backgroundWidth;\n}\n\n\n/**\n * offset in DX canvas so half of the start is always visible\n */\nBackgroundStars.prototype.offsetDX = function () {\n    return Math.random() * this.canvas.width - this.backgroundWidth / 2;\n}\n\n/**\n * Move background and others object in parallax from top to bottom screen. Then repeat\n */\nBackgroundStars.prototype.update = function () {\n    this.backgroundDY += this.backgroundSpeed;\n    if (this.backgroundDY >= this.canvas.height + this.backgroundHeight * 2) {\n        this.randomSize = this.returnRandomSize();\n        this.backgroundSX = this.offsetSX();\n        this.backgroundDX = this.offsetDX();\n        this.backgroundDY = - this.backgroundHeight;\n        this.backgroundSpeed = this.randomSpeed(this.gameSpeed);\n    }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nBackgroundStars.prototype.render = function (ctx) {\n    // Draw the star\n    ctx.drawImage(\n        this.backgroundGraphicsBody,\n        this.backgroundSX,\n        this.backgroundSY,\n        this.backgroundWidth,\n        this.backgroundHeight,\n        this.backgroundDX,\n        this.backgroundDY,\n        this.backgroundWidth / this.randomSize,\n        this.backgroundHeight / this.randomSize,\n    );\n}","export default __webpack_public_path__ + \"582a0e1eee2afc28f99d4b171dc4454f.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\nimport fogsImg from './img/fogs.png';\n\n/**\n * BackgroundFogs: create random stars in the background\n * @param {HTMLCanvasElement} canvas \n * @param {Number} gameSpeed \n */\nexport default function BackgroundFogs(canvas, gameSpeed) {\n    this.canvas = canvas;\n    this.gameSpeed = gameSpeed;\n\n    this.backgroundGraphicsBody = new Image();\n    this.backgroundGraphicsBody.src = fogsImg;\n\n    // FIXME retrieve image size with onlaod ? \n    this.backgroundWidth = 2048;\n    this.backgroundHeight = 2048;\n\n    this.randomSize = this.returnRandomSize();\n\n    this.randomRotation = this.returnRandomRotation();\n\n    // TODO add gameSpeed in update function to change speed during game loop\n    this.gameSpeed = gameSpeed;\n    this.backgroundSpeed = this.randomSpeed(gameSpeed);\n\n    // TODO Ratio: not usefull right now\n    this.ratioW = this.backgroundWidth / this.canvas.width;\n    this.ratioH = this.backgroundHeight / this.canvas.height;\n\n    // Image source\n    this.backgroundSX = this.offsetSX();\n    this.backgroundSY = 0;\n\n    // Canvas destination position\n    this.backgroundDX = this.offsetDX();\n    this.backgroundDY = - this.backgroundHeight;\n}\n\nBackgroundFogs.prototype.returnRandomRotation = function() {\n    return Math.floor(Math.random() * 360) * (Math.PI / 180);\n}\n\n/**\n * Return the random size for a fog\n * @param {Number} - a random number between 1 and 2 include\n */\nBackgroundFogs.prototype.returnRandomSize = function () {\n    return Math.floor(Math.random() * 2) + 1;\n}\n\nBackgroundFogs.prototype.randomSpeed = function (gameSpeed) {\n    return gameSpeed * Math.round(Math.random() * 3) + 1; // + 1 to avoid 0 speed\n}\n\n\n/**\n * offset in SX image to choose randomly between 4 stars in tile\n */\nBackgroundFogs.prototype.offsetSX = function () {\n    return Math.floor(Math.random() * 3) * this.backgroundWidth;\n}\n\n\n/**\n * offset in DX canvas so half of the start is always visible\n */\nBackgroundFogs.prototype.offsetDX = function () {\n    return Math.random() * this.canvas.width - this.backgroundWidth / 2;\n}\n\n/**\n * Move background and others object in parallax from top to bottom screen. Then repeat\n */\nBackgroundFogs.prototype.update = function () {\n    this.backgroundDY += this.backgroundSpeed;\n    if (this.backgroundDY >= this.canvas.height + this.backgroundHeight * 2) {\n        this.randomRotation = this.returnRandomRotation();\n        this.randomSize = this.returnRandomSize();\n        this.backgroundSX = this.offsetSX();\n        this.backgroundDX = this.offsetDX();\n        this.backgroundDY = - this.backgroundHeight;\n        this.backgroundSpeed = this.randomSpeed(this.gameSpeed);\n    }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nBackgroundFogs.prototype.render = function (ctx) {\n    // save the unrotated context of the canvas so we can restore it later\n    // the alternative is to untranslate & unrotate after drawing\n    // ctx.save();\n    // // move to the center of the physics body\n    // ctx.translate(\n    //     this.canvas.width / 2,\n    //     this.canvas.height / 2);\n    // // rotate the canvas to the specified angle\n    // ctx.rotate(this.randomRotation);\n    // Draw the star\n    ctx.drawImage(\n        this.backgroundGraphicsBody,\n        this.backgroundSX,\n        this.backgroundSY,\n        this.backgroundWidth,\n        this.backgroundHeight,\n        this.backgroundDX,\n        this.backgroundDY,\n        this.backgroundWidth / this.randomSize,\n        this.backgroundHeight /this.randomSize,\n    );\n    // ctx.restore();\n}","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\n// Others\nimport BackgroundPlanets from './backgroundPlanets';\nimport BackgroundStars from './backgroundStars';\nimport BackgroundFogs from './backgroundFogs';\n\n/**\n * Background: the background of the Game. Use repeated tiles in top and bottom\n * @param {HTMLCanvasElement} canvas \n * @param {Number} gameSpeed - background scroll\n */\nexport default function Background(canvas, nbBackgroundStars, nbForegroundStars, nbBackgroundFogs, nbForegroundFogs, gameSpeed) {\n    this.canvas = canvas;\n    this.gameSpeed = gameSpeed;\n\n    // this.backgroundGraphicsBody = new Image();\n    // this.backgroundGraphicsBody.src = backgroundImg;\n\n    // // FIXME retrieve image size with onlaod ? \n    // this.backgroundWidth = 2480;\n    // this.backgroundHeight = 3508;\n\n    // // TODO add gameSpeed in update function to change speed during game loop\n    // this.backgroundSpeed = gameSpeed;\n\n    // // TODO Ratio: not usefull right now\n    // this.ratioW = this.backgroundWidth / this.canvas.width;\n    // this.ratioH = this.backgroundHeight / this.canvas.height;\n\n    // // Canvas destination position\n    // this.backgroundDX = 0;\n    // this.backgroundDY = this.setOffset(this.backgroundHeight);\n\n\n    // TODO backgroundStars and backgroundPlanets are the same. Make a generic object constructor\n    this.backgroundPlanets = new BackgroundPlanets(canvas, gameSpeed);\n\n    this.starsBackgroundArr = [];\n    for (let i = 0; i < nbBackgroundStars; i++) {\n        this.starsBackgroundArr.push(new BackgroundStars(canvas, gameSpeed));\n    }\n\n    this.starsForegroundArr = [];\n    for (let i = 0; i < nbForegroundStars; i++) {\n        this.starsForegroundArr.push(new BackgroundStars(canvas, gameSpeed));\n    }\n\n    this.fogsBackgroundArr = [];\n    for (let i = 0; i < nbBackgroundFogs; i++) {\n        this.fogsBackgroundArr.push(new BackgroundFogs(canvas, gameSpeed));\n    }\n\n    this.fogsForegroundArr = [];\n    for (let i = 0; i < nbForegroundFogs; i++) {\n        this.fogsForegroundArr.push(new BackgroundFogs(canvas, gameSpeed));\n    }\n}\n\n/**\n * Static function to calculate starting offset\n * offset is calculated with width ratio in account\n * @param {Number} imageHeight\n * @return {Number} the offset\n */\nBackground.prototype.setOffset = function (imageHeight) {\n    return this.canvas.height - imageHeight;\n}\n\n/**\n * Move background and others object in parallax. Then repeat\n */\nBackground.prototype.update = function () {\n    // this.backgroundDY += this.backgroundSpeed;\n    // if (this.backgroundDY >= 0) {\n    //     this.backgroundDY = this.setOffset(this.backgroundHeight);\n    // }\n\n    this.starsBackgroundArr.forEach(star => {\n        star.update();\n    })\n\n    this.starsForegroundArr.forEach(star => {\n        star.update();\n    })\n\n    this.fogsBackgroundArr.forEach(fog => {\n        fog.update();\n    })\n\n    this.fogsForegroundArr.forEach(fog => {\n        fog.update();\n    })\n\n    this.backgroundPlanets.update();\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n */\nBackground.prototype.render = function (ctx) {\n    // Draw the background\n    // ctx.drawImage(\n    //     this.backgroundGraphicsBody,\n    //     this.backgroundDX,\n    //     this.backgroundDY,\n    //     this.canvas.width,\n    //     this.backgroundHeight,\n    // );\n\n    this.starsBackgroundArr.forEach(star => {\n        star.render(ctx);\n    })\n\n    this.fogsBackgroundArr.forEach(fog => {\n        fog.render(ctx);\n    })\n\n    this.backgroundPlanets.render(ctx);\n\n    this.starsForegroundArr.forEach(star => {\n        star.render(ctx);\n    })\n\n    this.fogsForegroundArr.forEach(fog => {\n        fog.render(ctx);\n    })\n}\n\n","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n * \n */\n\n/**\n * Display in the target position text\n * @param {HTMLCanvasElement} canvas \n * @param {String} text \n */\nexport default function Text(canvas, text, targetPos, fontSize, debug) {\n    this.canvas = canvas;\n    this.text = text;\n    this.targetPos = targetPos;\n    this.fontSize = fontSize;\n    this.destroyed = false;\n    this.debug = debug;\n}\n\n// Return the width in px of the String\nText.prototype.stringTotalWdith = function () {\n    return (this.text.length) * this.fontSize / 3.5;\n}\n\n/**\n * @param {String} text\n */\nText.prototype.changeText = function (text) {\n    this.text = text;\n}\n\nText.prototype.update = function () { }\n\nText.prototype.destroy = function () {\n    this.destroyed = true;\n}\n\nText.prototype.render = function (ctx) {\n    ctx.fillStyle = \"rgba(100, 100, 255, 1)\";\n    ctx.font = `bold ${this.fontSize}px Monospace`;\n    ctx.fillText(`${this.text}`, (this.canvas.width / 2) - this.stringTotalWdith(), this.canvas.height / 2 - 200);\n}","export default __webpack_public_path__ + \"842453cd13c4cc6a15c534e0c299907d.png\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\nimport shieldPackImg from './img/shieldPack.png'\nimport Circle from '../../geometry/circle';\nimport GameComponent from '../gameComponent';\nimport Vector2 from '../../geometry/vector';\nimport Collision from '../../collision';\n\nexport default function ShieldPack(canvas, debug) {\n    this.canvas = canvas;\n\n    this.radius = 16;\n\n    let randomX = Math.round(Math.random() * (this.canvas.width - this.radius * 2)) + this.radius;\n    \n    let graphicsBody = new Image();\n    graphicsBody.src = shieldPackImg;\n\n    let physicsBody = new Circle(randomX, - this.radius * 2, this.radius);\n\n    this.gameComponent = new GameComponent(canvas, physicsBody, graphicsBody, false, false, debug);\n\n    this.topPosition = new Vector2(randomX, -this.radius * 2);\n    this.bottomPosition = new Vector2(randomX, this.canvas.height + this.radius * 2);\n    this.vector2Direction = Vector2.substract(this.bottomPosition, this.topPosition);\n\n    // TODO add various shield amounts\n    this.shieldAmount = 25;\n\n    this.destroyed = false;\n\n    this.debug = debug;\n}\n\n/**\n * Move from random top canvas position to same X bottom\n * @param {Game_components: player} target\n */\nShieldPack.prototype.move = function (target) {\n    if (Collision.circlesCollision(this.gameComponent.physicsBody, target.gameComponent.physicsBody)) {\n        target.gainShield(this.shieldAmount);\n        this.destroyed = true;\n    } else if (this.gameComponent.y >= this.bottomPosition) {\n        this.destroyed = true;\n    } else {\n        this.gameComponent.moveNoLerp(this.vector2Direction, 0, 5);\n    }\n}\n\nShieldPack.prototype.update = function () {\n    this.gameComponent.update();\n}\n\nShieldPack.prototype.render = function (ctx) {\n    this.gameComponent.render(ctx);\n}","export default __webpack_public_path__ + \"b7fd6ad0897161351ae7f60114503dcb.jpg\";","export default __webpack_public_path__ + \"50422eb553878ceebd05e03cf7a1a6ef.mp3\";","/**\n * @author: Valentin Cadot\n * @version: 1.0.0\n */\n\n// FIXME add a viewport for resize gameComponents in render\n// CV\n// TODO slow on tablet, blocked on mobile\n// use URI CV\n\n// Config\nimport { gameConfig, gameDebug, backgroundConfig, enemyConfig, shieldPackConfig } from './config/config';\n\n// Primitives\nimport Vector2 from './geometry/vector';\n\n// GameComponents\nimport Player from './game_components/player/player';\nimport Enemy from './game_components/enemy/enemy';\n\n// UI\nimport Score from './ui/score';\nimport Background from './background/background';\nimport Text from './ui/text';\nimport ShieldPack from './game_components/shieldPack/shieldPack';\n\n// Ressources\nimport rulesImg from './Rules.jpg';\n\n// Audio\nimport gameLoop from './sounds/gameLoop.mp3';\n\n// Globals variables\n// TODO: bind the context in the window.addEventListener\n// Add a game world\nvar playerTarget = new Vector2(0, 0);\n\nexport default function Game(canvas) {\n  this.canvas = canvas;\n\n  this.ctx = canvas.getContext('2d');\n  this.ctxBlackScreen = canvas.getContext('2d');\n  this.ctxText = canvas.getContext('2d');\n  this.ctxMenu = canvas.getContext('2d');\n  this.ctxMenuRestart = canvas.getContext('2d');\n\n  this.startTime = -1;\n  this.animationLength = 2000;\n\n  // store calls to requestAnimationFrame\n  this.rafID = null;\n\n  this.playerReachStartPos = false;\n\n  // this.gameSound = new Audio();\n  // this.gameSound.src = gameLoop;\n  // this.gameSound.loop = true;\n\n  // initiale position for every gameComponents\n  this.initPos = new Vector2(0, 0);\n\n  this.rulesImage = new Image();\n  this.rulesImage.src = rulesImg;\n\n  this.totalScore = 0;\n\n  this.buttonShowDebug = false;\n\n  this.buttonArr = [];\n\n  this.spawnEnemyTimer = enemyConfig.enemySpeedSpawn;\n  this.spawnShieldPackTimer = shieldPackConfig.shieldPackSpeedSpawn;\n\n  // Audio\n  // this.audioAmbient = new Audio(\"../Ambient-Cave-SoundBible.com-2124899044.mp3\");\n  // console.log(this.audioAmbient);\n}\n\nGame.prototype.menuScreen = function () {\n  this.ctxMenu.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n  this.buttonArr = [];\n\n  let startButton = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'Start',\n    render: function (context) {\n      context.fillStyle = \"#372F3F\";\n      context.fillRect(this.left, this.top, this.width, this.height);\n      context.font = `bold 32px Monospace`;\n      context.fillStyle = \"grey\";\n      context.fillText(`${this.text}`, this.left + this.width / 2 - 50, this.top + this.height / 2 + 10);\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 50;\n    },\n    click: () => {\n      this.ctxMenu.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.canvas.removeEventListener('click', buttonClick);\n      this.canvas.removeEventListener('mouseover', buttonHover);\n      this.buttonArr = [];\n      // this is Game object\n      this.start();\n    },\n    hover: () => {\n      this.ctxMenu.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctxMenu.fillStyle = \"#372F00\";\n      this.ctxMenu.fillRect(this.left, this.top, this.width, this.height);\n      this.ctxMenu.font = `bold 32px Monospace`;\n      this.ctxMenu.fillStyle = \"white\";\n      this.ctxMenu.fillText(`${this.text}`, this.left + this.width / 2 - 50, this.top + this.height / 2 + 10);\n    }\n  };\n\n  this.buttonArr.push(startButton);\n\n  let debugButton = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'Show debug',\n    showDebug: this.buttonShowDebug,\n    render: function (context) {\n      if (!this.showDebug) {\n        this.showDebug = !this.showDebug;\n        context.fillStyle = \"#372F3F\";\n        context.fillRect(this.left, this.top, this.width, this.height);\n        context.font = `bold 32px Monospace`;\n        context.fillStyle = \"grey\";\n        context.fillText(`${this.text}`, this.left + this.width / 2 - 97, this.top + this.height / 2 + 10);\n      } else {\n        this.showDebug = !this.showDebug;\n        context.fillStyle = \"green\";\n        context.fillRect(this.left, this.top, this.width, this.height);\n        context.font = `bold 32px Monospace`;\n        context.fillStyle = \"grey\";\n        context.fillText(`${this.text}`, this.left + this.width / 2 - 97, this.top + this.height / 2 + 10);\n      }\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 200;\n    },\n    click: () => {\n      this.buttonShowDebug = !this.buttonShowDebug;\n      gameDebug.flagDebug = this.buttonShowDebug;\n      this.buttonArr.forEach(button => {\n        button.render(this.ctxMenu);\n      })\n    },\n    hover: () => {\n      this.ctxMenu.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctxMenu.fillStyle = \"#372F00\";\n      this.ctxMenu.fillRect(this.left, this.top, this.width, this.height);\n      this.ctxMenu.font = `bold 32px Monospace`;\n      this.ctxMenu.fillStyle = \"white\";\n      this.ctxMenu.fillText(`${this.text}`, this.left + this.width / 2 - 50, this.top + this.height / 2 + 10);\n    }\n  };\n\n  this.buttonArr.push(debugButton);\n\n  // let rulesButton = {\n  //   width: 600,\n  //   height: 0,\n  //   left: 0,\n  //   top: 0,\n  //   img: this.rulesImage,\n  //   render: function (context) {\n  //     context.drawImage(\n  //       this.img,\n  //       0,\n  //       this.top,\n  //       this.width,\n  //       this.height\n  //     );\n  //   },\n  //   center: function (canvas) {\n  //     this.left = canvas.width / 2 - this.width / 2;\n  //     this.top = 0;\n  //     this.width = canvas.width;\n  //     this.height = canvas.height - this.top;\n  //   },\n  //   click: () => {\n  //   },\n  //   hover: () => {\n  //   }\n  // };\n\n  // this.buttonArr.push(rulesButton);\n\n  // this.rulesImage.onload = () => {\n  //   this.buttonArr.forEach(button => {\n  //     button.center(this.canvas);\n  //     button.render(this.ctxMenu);\n  //   })\n  // }\n\n  this.buttonArr.forEach(button => {\n    button.center(this.canvas);\n    button.render(this.ctxMenu);\n  })\n\n  this.canvas.buttons = this.buttonArr;\n\n  this.canvas.addEventListener('click', buttonClick);\n  this.canvas.addEventListener('mouseover', buttonHover);\n\n  // render on resize\n  window.addEventListener('resize', () => {\n    this.buttonArr.forEach(button => {\n      button.center(this.canvas);\n      button.render(this.ctxMenu);\n    })\n  })\n}\n\n/** \n * TODO Same as startButton - factorise !\n * TODO render ctx on window resize\n */\nGame.prototype.restartScreen = function () {\n  this.ctxMenuRestart.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n  this.buttonArr = [];\n\n  let restartButton = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'Restart',\n    render: function (context) {\n      context.fillStyle = \"#372F3F\";\n      context.fillRect(this.left, this.top, this.width, this.height);\n      context.font = `bold 32px Monospace`;\n      context.fillStyle = \"grey\";\n      context.fillText(`${this.text}`, this.left + this.width / 2 -70, this.top + this.height / 2 + 10);\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 50;\n    },\n    click: () => {\n      this.ctxMenuRestart.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.canvas.removeEventListener('click', buttonClick);\n      //this.canvas.removeEventListener('touchdown', buttonClick);\n      this.canvas.removeEventListener('mouseover', buttonHover);\n      this.buttonArr = [];\n      // this is Game object\n      this.start();\n    },\n    hover: () => {\n      this.ctxMenuRestart.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctxMenuRestart.fillStyle = \"#372F00\";\n      this.ctxMenuRestart.fillRect(this.left, this.top, this.width, this.height);\n      this.ctxMenuRestart.font = `bold 32px Monospace`;\n      this.ctxMenuRestart.fillStyle = \"white\";\n      this.ctxMenuRestart.fillText(`${this.text}`, this.left + this.width / 2 - 70, this.top + this.height / 2 + 10);\n    }\n  };\n\n  this.buttonArr.push(restartButton);\n\n  let debugButton = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'Show debug',\n    showDebug: this.buttonShowDebug,\n    render: function (context) {\n      if (!this.showDebug) {\n        // TODO when resizing, this.showDebug will be true then false then true, etc...\n        this.showDebug = !this.showDebug;\n        context.fillStyle = \"#372F3F\";\n        context.fillRect(this.left, this.top, this.width, this.height);\n        context.font = `bold 32px Monospace`;\n        context.fillStyle = \"grey\";\n        context.fillText(`${this.text}`, this.left + this.width / 2 - 100, this.top + this.height / 2 + 10);\n      } else {\n        this.showDebug = !this.showDebug;\n        context.fillStyle = \"green\";\n        context.fillRect(this.left, this.top, this.width, this.height);\n        context.font = `bold 32px Monospace`;\n        context.fillStyle = \"grey\";\n        context.fillText(`${this.text}`, this.left + this.width / 2 - 100, this.top + this.height / 2 + 10);\n      }\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 200;\n    },\n    click: () => {\n      this.buttonShowDebug = !this.buttonShowDebug;\n      gameDebug.flagDebug = this.buttonShowDebug;\n      this.buttonArr.forEach(button => {\n        button.render(this.ctxMenuRestart, this.totalScore);\n      })\n    },\n    hover: () => {\n      this.ctxMenu.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctxMenu.fillStyle = \"#372F00\";\n      this.ctxMenu.fillRect(this.left, this.top, this.width, this.height);\n      this.ctxMenu.font = `bold 32px Monospace`;\n      this.ctxMenu.fillStyle = \"white\";\n      this.ctxMenu.fillText(`${this.text}`, this.left + this.width / 2 - 95, this.top + this.height / 2 + 10);\n    }\n  };\n\n  this.buttonArr.push(debugButton);\n\n  let downloadCV = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'Download my CV',\n    render: function (context) {\n      context.fillStyle = \"#372F3F\";\n      context.fillRect(this.left, this.top, this.width, this.height);\n      context.font = `bold 32px Monospace`;\n      context.fillStyle = \"grey\";\n      context.fillText(`${this.text}`, this.left + this.width / 2 - 135, this.top + this.height / 2 + 10);\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 350;\n    },\n    stringWidth: (text) => {\n      return (text.length + this.totalScore.toString().length) * 19;\n    },\n    click: () => {\n      // window.open(\"data:application/pdf;base64, \" + cvBase64);\n      window.open(\"http://86.252.41.122/CV-VC-Ifocop.pdf\");\n    },\n    hover: () => { }\n  }\n\n  this.buttonArr.push(downloadCV);\n\n  let totalScore = {\n    width: 300,\n    height: 100,\n    left: 0,\n    top: 0,\n    text: 'final score : ',\n    render: function (ctx, score) {\n      ctx.font = `bold 32px Monospace`;\n      ctx.fillStyle = \"white\";\n      ctx.fillText(`${this.text}${score}`, this.left + this.width / 2 - this.stringWidth(this.text), this.top + this.height / 2 + 10);\n    },\n    center: function (canvas) {\n      this.left = canvas.width / 2 - this.width / 2;\n      this.top = 500;\n    },\n    stringWidth: (text) => {\n      return (text.length + this.totalScore.toString().length) * 10;\n    },\n    click: () => { },\n    hover: () => { }\n  };\n\n  this.buttonArr.push(totalScore);\n\n\n  this.buttonArr.forEach(button => {\n    button.center(this.canvas);\n    button.render(this.ctxMenuRestart, this.totalScore);\n  })\n\n  this.canvas.buttons = this.buttonArr;\n\n  // render on resize\n  window.addEventListener('resize', () => {\n    this.buttonArr.forEach(button => {\n      button.center(this.canvas);\n      button.render(this.ctxMenu);\n    })\n  });\n\n  this.canvas.addEventListener('click', buttonClick);\n  //this.canvas.addEventListener('touchdown', buttonClick);\n  this.canvas.addEventListener('mouseover', buttonHover)\n}\n\nfunction buttonClick(event) {\n  var x = event.pageX - this.offsetLeft;\n  var y = event.pageY - this.offsetTop;\n\n  this.buttons.forEach(button => {\n    if (y > button.top && y < button.top + button.height\n      && x > button.left && x < button.left + button.width) {\n      button.click();\n    }\n  });\n}\n\nfunction buttonHover(event) {\n  var x = event.pageX - this.offsetLeft;\n  var y = event.pageY - this.offsetTop;\n\n  this.buttons.forEach(button => {\n    if (y > button.top && y < button.top + button.height\n      && x > button.left && x < button.left + button.width) {\n      button.hover();\n    }\n  });\n}\n\n\nGame.prototype.start = function () {\n  // setTimeout(function () {\n  //   // preload stuff\n  // }, 1000);\n  this.addListener();\n  this.init();\n}\n\nGame.prototype.reset = function () {\n  this.removeListener();\n  this.restartScreen();\n}\n\nGame.prototype.init = function () {\n  // Audio\n  this.gameSound = new Audio();\n  this.gameSound.src = gameLoop;\n  this.gameSound.loop = true;\n  this.gameSound.play();\n  // CTX\n  this.ctxBlackScreen.globalAlpha = 0;\n\n  this.flagDrawPending = false;\n\n  // Score\n  this.totalScore = 0;\n\n  // UI\n  this.score = new Score(this.canvas);\n\n  // Text\n  this.readyText = new Text(this.canvas, 'Ready ?', new Vector2(0, 0), 64, gameDebug);\n  // Background\n  this.background = new Background(this.canvas,\n    backgroundConfig.nbBackgroundStars,\n    backgroundConfig.nbForegroundStars,\n    backgroundConfig.nbBackgroundFogs,\n    backgroundConfig.nbForegroundFogs,\n    gameConfig.gameSpeed);\n\n  // Player\n  // To set player position outside canvas, make a teleport function\n  // when player is instantiate, teleport to the position\n  playerTarget.x = this.canvas.width / 2;\n  playerTarget.y = this.canvas.height / 2;\n\n  this.player = new Player(this.canvas, this.initPos, gameConfig.gameScale, gameDebug);\n  this.playerReachStartPos = false;\n  let playerStartPos = new Vector2(this.canvas.width / 2, this.canvas.height + this.player.gameComponent.physicsBody.radius * 2);\n  this.player.gameComponent.teleport(playerStartPos);\n\n  // Enemies\n  this.enemyArr = [];\n  this.allEnemyArr = [];\n\n  this.shieldPackArr = [];\n\n  // Projectiles\n  this.projectileArr = [];\n\n  // Scale the game before lauching the loop\n  this.scale();\n\n  // start the game loop\n  requestAnimationFrame(this.requestRedraw.bind(this));\n}\n\n// TODO use () => function or .bind() to get the context ?\nGame.prototype.addListener = function () {\n  // Touch listeners\n  this.canvas.addEventListener('touchstart', touchHandler, false);\n  this.canvas.addEventListener('touchmove', touchHandler, false);\n\n  // Mouse Listeners\n  this.canvas.addEventListener('mousedown', mouseHandler, true);\n  this.canvas.addEventListener('mousemove', mouseHandler, false);\n\n  // Add condition if using mobile device\n\n};\n// TODO use () => function or .bind() to get the context ?\nGame.prototype.removeListener = function () {\n  // Touch listeners\n  this.canvas.removeEventListener('touchstart', touchHandler, false);\n  this.canvas.removeEventListener('touchmove', touchHandler, false);\n\n  // Mouse Listeners\n  this.canvas.removeEventListener('mousedown', mouseHandler, true);\n  this.canvas.removeEventListener('mousemove', mouseHandler, false);\n\n  // Add condition if using mobile device\n\n};\n\n// TODO: add focus on canvas to avoid scrolling the document and avoid player leaving the canvas\nfunction touchHandler(event) {\n  event.preventDefault();\n  event = event.touches[0];\n  playerTarget = new Vector2(event.pageX, event.pageY);\n}\n\nfunction mouseHandler(event) {\n  event.preventDefault();\n  playerTarget = new Vector2(event.pageX, event.pageY);\n}\n\n// unreference destroyed gameComponents so garbage collector can delete them\nGame.prototype.updateDestroyed = function () {\n  for (let i = 0; i < this.enemyArr.length; i++) {\n    if (this.enemyArr[i].destroyed) {\n      // remove the enemy\n      // this.player.enemyInAggroArr.splice(i, 1);\n      this.player.enemyInAggroArr.splice(this.player.enemyInAggroArr.indexOf(this.enemyArr[i].id), 1);\n      // ! Delete the object at last, because reference is lost for other operation\n      this.enemyArr.splice(i, 1);\n    }\n\n    for (let i = 0; i < this.shieldPackArr.length; i++) {\n      if (this.shieldPackArr[i].destroyed) {\n        this.shieldPackArr.splice(i, 1);\n      }\n    }\n\n    if (undefined !== this.player && this.player.destroyed) {\n      this.player = null;\n      delete this.player;\n    }\n\n    if (undefined !== this.readyText && this.readyText.destroyed) {\n      this.readyText = null;\n      delete this.readyText;\n    }\n  }\n}\n\nGame.prototype.updateScore = function () {\n  if (undefined !== this.player) {\n    var enemyTotalScore = 0;\n    this.allEnemyArr.forEach(enemy => {\n      enemyTotalScore += enemy.score;\n    });\n    this.score.update(enemyTotalScore + this.player.score);\n    this.totalScore = this.score.score;\n  }\n}\n\n/**\n * Scale the gameComponents and physicsBody\n */\nGame.prototype.scale = function () {\n  this.enemyArr.forEach(enemy => {\n    enemy.gameComponent.physicsBody.scale(gameConfig.gameScale);\n  })\n\n  this.player.gameComponent.physicsBody.scale(gameConfig.gameScale);\n}\n\nGame.prototype.spawnShieldPack = function () {\n  this.spawnShieldPackTimer -= Math.random();\n\n  if (this.spawnShieldPackTimer <= 0) {\n    this.spawnShieldPackTimer = shieldPackConfig.shieldPackSpeedSpawn;\n    this.shieldPackArr.push(new ShieldPack(this.canvas, gameDebug));\n  }\n}\n\n/**\n * Spawn random enemies based on score\n */\nGame.prototype.spawnRandomEnemy = function () {\n  this.spawnEnemyTimer -= Math.random();\n\n  if (this.spawnEnemyTimer <= 0) {\n    this.spawnEnemyTimer = enemyConfig.enemySpeedSpawn;\n\n    var enemy = new Enemy(this.canvas, this.initPos, gameDebug);\n\n    var spawnX = null;\n    var spawnY = null\n\n    let randomSideCanvas = Math.round(Math.random() * 3); // choose a side of canvas\n    switch (randomSideCanvas) {\n      case 0: // top side\n        spawnX = Math.round(Math.random() * (this.canvas.width - enemy.gameComponent.physicsBody.radius * 2)) + enemy.gameComponent.physicsBody.radius;\n        spawnY = - enemy.gameComponent.physicsBody.radius * 2;\n        break;\n      case 1: // bottom side\n        spawnX = Math.round(Math.random() * (this.canvas.width - enemy.gameComponent.physicsBody.radius * 2)) + enemy.gameComponent.physicsBody.radius;\n        spawnY = this.canvas.height + enemy.gameComponent.physicsBody.radius;\n        break;\n      case 2: // Left side\n        spawnX = - enemy.gameComponent.physicsBody.radius;\n        spawnY = Math.round(Math.random() * (this.canvas.height - enemy.gameComponent.physicsBody.radius * 2)) + enemy.gameComponent.physicsBody.radius;\n        break;\n      case 3: // Right side\n        spawnX = this.canvas.width + enemy.gameComponent.physicsBody.radius;\n        spawnY = Math.round(Math.random() * (this.canvas.height - enemy.gameComponent.physicsBody.radius * 2)) + enemy.gameComponent.physicsBody.radius;\n        break;\n      default: console.log('Bug');\n    }\n\n    enemy.gameComponent.teleport(new Vector2(spawnX, spawnY));\n    this.enemyArr.push(enemy);\n    this.allEnemyArr.push(enemy);\n  }\n}\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n// !!! Separate physics from graphics !!!\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n/**\n * Update the game logic and physic\n */\nGame.prototype.update = function () {\n  // UI\n  this.updateScore();\n\n  // background\n  this.background.update();\n\n  // gameComponents\n  this.updateDestroyed();\n\n  // player and enemies\n  if (!this.playerReachStartPos) {\n    this.player.reachStartPos();\n    this.player.update(this.enemyArr);\n    if (this.player.reachStartPos()) {\n      this.playerReachStartPos = true;\n      console.log('game start !');\n      this.readyText.changeText('GO !!!');\n      this.readyText.destroy();\n    }\n  } else {\n    if (undefined !== this.player) {\n      this.player.moveTouch(playerTarget);\n      this.player.update(this.enemyArr);\n      this.spawnRandomEnemy();\n      this.spawnShieldPack();\n\n      this.shieldPackArr.forEach(shieldPack => {\n        shieldPack.move(this.player);\n        shieldPack.update();\n      })\n\n      this.enemyArr.forEach(enemy => {\n        if (enemy.reachStartPos) {\n          if (undefined !== this.player) {\n            enemy.move(this.player);\n          } else {\n            enemy.move();\n          }\n        } else {\n          if (undefined !== this.player) {\n            enemy.moveStartPos(this.player);\n          } else {\n            enemy.moveStartPos();\n          }\n        }\n        enemy.update(this.player);\n      })\n    }\n  }\n  // this.projectileArr.forEach(projectile => {\n  //   projectile.update();\n  // })\n}\n\n/**\n * Update the game graphics\n */\nGame.prototype.render = function () {\n  this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.ctxBlackScreen.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.ctxText.clearRect(0, 0, this.canvas.window, this.canvas.height);\n\n  // Draw a black background fading while player didn't reach the startPos\n  //// to avoid the ugly background rendering at start\n  if (!this.playerReachStartPos) {\n    this.ctxBlackScreen.fillStyle = 'black';\n    this.ctxBlackScreen.globalAlpha += 0.008;\n  } else {\n    this.ctxBlackScreen.globalAlpha = 1;\n  }\n\n  // Background\n  this.background.render(this.ctx);\n\n  // UI\n  this.score.render(this.ctx);\n\n  // Enemies\n  this.enemyArr.forEach(enemy => {\n    enemy.render(this.ctx);\n  })\n\n  this.shieldPackArr.forEach(shieldPack => {\n    shieldPack.render(this.ctx);\n  })\n\n  // Text\n  if (undefined !== this.readyText) {\n    this.readyText.render(this.ctxText);\n  }\n\n  // Player\n  if (undefined !== this.player) {\n    this.player.render(this.ctx);\n  }\n}\n/**\n * Game loop: redraw the game physics and graphics\n */\nGame.prototype.redraw = function () {\n  if (undefined !== this.player) {\n    this.flagDrawPending = false;\n    this.update();\n    this.render();\n    this.requestRedraw();\n  } else {\n    this.reset();\n  }\n}\n\n// Use 2 functions calling each others to keep RAF singleton (avoid drawings same thing multiple times). With flagDrawPending\n/**\n * Game loop: manage RequestAnimationFrame timestamp, singleton and fps\n * @param {Float} timestamp - the time between each call to RAF\n */\nGame.prototype.requestRedraw = function (timestamp) {\n  if (!this.flagDrawPending) {\n    this.flagDrawPending = true;\n\n    let progress = 0;\n\n    if (this.startTime < 0) {\n      this.startTime = timestamp;\n    } else {\n      progress = timestamp - this.startTime;\n    }\n\n    // TODO: DRY!\n    if (progress < this.animationLength) {\n      this.rafID = requestAnimationFrame(this.redraw.bind(this));\n    } else {\n      // TODO: look if necessary ?\n      this.startTime = -1;\n      this.rafID = requestAnimationFrame(this.redraw.bind(this));\n    }\n  }\n}\n","'use strict';\n/**\n * Function index\n * Main entry file\n * @author: Valentin Cadot\n * @version: 1.0.0\n**/\n\nimport Game from './game.js';\nimport './style.css';\n\nvar isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\nif (isMobile) {\n    console.log('mobile detected :', navigator.userAgent);\n} else {\n    console.log(\"Navigator don't support deviceorientation\");\n}\n\n// Create the canvas element\n// TODO get height and width from config file\nfunction canvasComponent() {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('id', 'gameCanvas');\n        canvas.setAttribute('width', window.innerWidth);\n        canvas.setAttribute('height', window.innerHeight);\n    canvas.innerHTML = `${canvas} / canvas element don't exist, please use a modern web browser :)`;\n    return canvas;\n}\n\nif (isMobile) {\n    window.addEventListener('DOMMouseScroll', preventDefault, false);\n    window.ontouchmove = preventDefault;\n    function preventDefault(e) {\n        e = e || window.event;\n        if (e.preventDefault)\n            e.preventDefault();\n        e.returnValue = false;\n    }\n}\n\nlet canvasElement = canvasComponent();\ndocument.body.appendChild(canvasElement);\n\nwindow.addEventListener('resize', function() {\n    this.document.getElementById('gameCanvas').setAttribute('width', window.innerWidth);\n    this.document.getElementById('gameCanvas').setAttribute('height', window.innerHeight);\n});\n\n// Instantiate the game\nlet game = new Game(canvasElement);\n\n// Initialize the game\ngame.menuScreen();\n\n"],"sourceRoot":""}